<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>äº‹åŠ¡ on ä¸€å±‚</title><link>https://blog.letout.cn/tags/%E4%BA%8B%E5%8A%A1/</link><description>Recent content in äº‹åŠ¡ on ä¸€å±‚</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 03 Mar 2023 12:14:45 +0800</lastBuildDate><atom:link href="https://blog.letout.cn/tags/%E4%BA%8B%E5%8A%A1/index.xml" rel="self" type="application/rss+xml"/><item><title>åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆDoingï¼‰</title><link>https://blog.letout.cn/p/distributed/transaction/</link><pubDate>Fri, 03 Mar 2023 12:14:45 +0800</pubDate><guid>https://blog.letout.cn/p/distributed/transaction/</guid><description>&lt;img src="https://blog.letout.cn/p/distributed/transaction/cap.webp" alt="Featured image of post åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆDoingï¼‰" />&lt;h2 id="äº‹åŠ¡">äº‹åŠ¡&lt;/h2>
&lt;h3 id="æ•°æ®åº“äº‹åŠ¡">æ•°æ®åº“äº‹åŠ¡&lt;/h3>
&lt;p>äº‹åŠ¡ï¼ˆå•æ•°æ®åº“çš„æœ¬åœ°äº‹åŠ¡ï¼‰æ˜¯æŒ‡ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ­£ç¡®æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚äº‹åŠ¡é€šå¸¸ä¼šæœ‰ ACID å››å¤§ç‰¹æ€§ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>A&lt;/code> åŸå­æ€§&lt;/li>
&lt;li>&lt;code>C&lt;/code> ä¸€è‡´æ€§&lt;/li>
&lt;li>&lt;code>I&lt;/code> éš”ç¦»æ€§&lt;/li>
&lt;li>&lt;code>D&lt;/code> æŒä¹…æ€§&lt;/li>
&lt;/ul>
&lt;h3 id="åˆ†å¸ƒå¼äº‹åŠ¡">åˆ†å¸ƒå¼äº‹åŠ¡&lt;/h3>
&lt;p>ç°åœ¨çš„å¤§å‹ä¸šåŠ¡ç³»ç»Ÿé€šå¸¸éƒ½ç”±è‹¥å¹²ä¸ªå­ç³»ç»Ÿæ„æˆï¼Œè¿™äº›å­ç³»ç»Ÿå„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®åº“ï¼Œä¸€ä¸ªä¸šåŠ¡æµç¨‹éœ€è¦ç”±å¤šä¸ªå­ç³»ç»Ÿå…±åŒå®Œæˆã€‚åˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯éœ€è¦ä¿éšœè¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚&lt;/p>
&lt;p>åˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯è¦ä¿éšœä¸åŒæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚åœ¨å¤§å‹çš„ç”µå•†ç³»ç»Ÿä¸­ï¼Œä¸‹å•æ—¶ä¼šï¼šæ‰£å‡åº“å­˜ï¼Œå‡ä¼˜æƒ ï¼Œç”Ÿæˆè®¢å•idç­‰å¤šä¸ªæ­¥éª¤ï¼Œé€šå¸¸è®¢å•æœåŠ¡ä¸åº“å­˜ã€ä¼˜æƒ ã€è®¢å•idéƒ½æ˜¯ä¸åŒçš„æœåŠ¡ã€‚è¿™äº›æ“ä½œæ˜¯å¦æˆåŠŸï¼Œä¾èµ–äºå¤šä¸ªç³»ç»Ÿçš„ç»“æœï¼Œå¯èƒ½æ¶‰åŠä¸‰ä¸ªç³»ç»ŸæœåŠ¡ï¼Œä¸‰ä¸ªæ•°æ®åº“ã€‚æ‰€ä»¥éœ€è¦åœ¨æ•°æ®åº“ä¸åº”ç”¨ç¨‹åºä¹‹é—´ï¼Œé€šè¿‡â€œä¸­é—´â€æ–¹æ¡ˆï¼Œå®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„æ”¯æŒã€‚&lt;/p>
&lt;h2 id="ä¸€è‡´æ€§">ä¸€è‡´æ€§&lt;/h2>
&lt;h3 id="å¼ºä¸€è‡´æ€§">å¼ºä¸€è‡´æ€§&lt;/h3>
&lt;p>åœ¨ä»»æ„æ—¶åˆ»ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ¯ä¸€æ¬¡è¯»æ“ä½œï¼Œéƒ½èƒ½è·å–åˆ°æ•°æ®æœ€è¿‘çš„ä¸€æ¬¡å†™æ“ä½œã€‚&lt;/p>
&lt;h3 id="å¼±ä¸€è‡´æ€§">å¼±ä¸€è‡´æ€§&lt;/h3>
&lt;p>æ•°æ®æ›´æ–°åï¼Œèƒ½å¤Ÿå®¹å¿åç»­çš„è®¿é—®åªèƒ½è®¿é—®éƒ¨åˆ†æ•°æ®æˆ–å…¨éƒ¨è®¿é—®ä¸åˆ°ã€‚&lt;/p>
&lt;h3 id="æœ€ç»ˆä¸€è‡´æ€§">æœ€ç»ˆä¸€è‡´æ€§&lt;/h3>
&lt;p>ä¸ä¿è¯ä»»æ„æ—¶åˆ»ä»»æ„èŠ‚ç‚¹ä¸Šçš„åŒä¸€ä»½æ•°æ®éƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯åœ¨ä¸€æ®µæ—¶å€™ä¹‹åï¼ŒèŠ‚ç‚¹çš„æ•°æ®æœ€ç»ˆä¼šè¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚&lt;/p>
&lt;h2 id="-cap">âš™ï¸ CAP&lt;/h2>
&lt;p>CAP å®šç†æŒ‡ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸€è‡´æ€§ &lt;code>Consistency&lt;/code>ï¼Œå¯ç”¨æ€§ &lt;code>Availability&lt;/code>ï¼Œåˆ†åŒºå®¹é”™æ€§ &lt;code>Partition tolerance&lt;/code>ï¼Œæœ€å¤šåªèƒ½æ»¡è¶³ä¸¤é¡¹ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>C&lt;/code> ä¸€è‡´æ€§&lt;/p>
&lt;p>æ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çš„æ•°æ®å®Œå…¨ä¸€è‡´ã€‚ï¼ˆä»»æ„æ—¶é—´åœ¨ä»»æ„èŠ‚ç‚¹è®¿é—®åˆ°çš„éƒ½æ˜¯æœ€æ–°çš„æ•°æ®ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>A&lt;/code> å¯ç”¨æ€§&lt;/p>
&lt;p>æœåŠ¡åœ¨ä¸€å®šæ—¶é—´å†…ï¼Œä¼šè¿”å›ä¸€ä¸ªæ˜ç¡®çš„ç»“æœï¼ŒæœåŠ¡ä¸€ç›´å¯ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>P&lt;/code> åˆ†åŒºå®¹é”™æ€§&lt;/p>
&lt;p>ä¸€ä¸ªæœåŠ¡åˆ†å¸ƒåœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ï¼Œå¦‚æœéƒ¨åˆ†ç³»ç»Ÿå®•æœºï¼Œå…¶ä»–ç³»ç»Ÿèƒ½å¶ç»§ç»­æä¾›æœåŠ¡ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åˆ†åŒºå®¹é”™æ€§æ—¶åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¹æœ¬ï¼Œå¦‚æœåˆ†åŒºå®¹é”™æ€§ä¸èƒ½æ»¡è¶³ï¼Œé‚£ä½¿ç”¨åˆ†å¸ƒå¼å¼ç³»ç»Ÿå°†å¤±å»æ„ä¹‰ã€‚&lt;/p>
&lt;p>&lt;img src="https://blog.letout.cn/p/distributed/transaction/cap.webp"
width="501"
height="460"
srcset="https://blog.letout.cn/p/distributed/transaction/cap_hu553ea908437f51f5f9df5986bc7065cb_18394_480x0_resize_q75_h2_box_2.webp 480w, https://blog.letout.cn/p/distributed/transaction/cap_hu553ea908437f51f5f9df5986bc7065cb_18394_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="108"
data-flex-basis="261px"
>&lt;/p>
&lt;h3 id="cp">CP&lt;/h3>
&lt;p>ä¸€è‡´æ€§ &amp;amp; åˆ†åŒºå®¹å¿æ€§&lt;/p>
&lt;p>ä¼˜å…ˆä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ã€‚å¦‚æ¶‰åŠé‡‘é’±äº¤æ˜“çš„ç¯èŠ‚ï¼Œä¿éšœæ•°æ®ä¸èƒ½å‡ºé”™ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h3 id="ap">AP&lt;/h3>
&lt;p>å¯ç”¨æ€§ &amp;amp; åˆ†åŒºå®¹å¿æ€§&lt;/p>
&lt;p>ä¼˜å…ˆä¿éšœç³»ç»Ÿçš„å¯ç”¨ã€‚äº’è”ç½‘ä¸­å¤§å¤šæ•°åœºæ™¯éƒ½æ˜¯ä¿éšœç³»ç»Ÿå¯ç”¨ï¼Œå¦‚åœ¨æœ‰å¤§é‡è¯·æ±‚æ—¶ï¼Œä¸€äº›æœåŠ¡å¯ä»¥å…ˆä¸æä¾›ï¼ˆå¦‚æ³¨å†Œç”¨æˆ·ï¼ŒæŸ¥è¯¢å†å²è®°å½•ç­‰ï¼‰ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="-base">ğŸ«§ BASE&lt;/h2>
&lt;p>BASE ç†è®ºæ˜¯æŒ‡ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åŸºæœ¬å¯ç”¨ &lt;code>Basically Available&lt;/code>&lt;/p>
&lt;p>åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼Œä¿è¯æ ¸å¿ƒå¯ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è½¯çŠ¶æ€ &lt;code>Soft State&lt;/code>&lt;/p>
&lt;p>å…è®¸ç³»ç»Ÿå­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œè¿™ä¸ªä¸­é—´çŠ¶æ€ä¸ä¼šå½±å“ç³»ç»Ÿæ•´ä½“çš„å¯ç”¨æ€§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ€ç»ˆä¸€è‡´æ€§ &lt;code>Eventual Consistency&lt;/code>&lt;/p>
&lt;p>ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬ç»è¿‡ä¸€å®šæ—¶é—´åï¼Œæœ€ç»ˆèƒ½å¤Ÿè¾¾åˆ°ä¸€è‡´æ€§çš„çŠ¶æ€ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>BASE ç†è®ºæœ¬è´¨ä¸Šæ˜¯å¯¹ CAP ç†è®ºçš„å»¶ä¼¸ï¼Œæ˜¯å¯¹ AP çš„è¡¥å……ã€‚&lt;/p>
&lt;p>å¯¹äºä¸šåŠ¡ç³»ç»Ÿæ¥è¯´ï¼Œé€šå¸¸é€‰æ‹©ç‰ºç‰²ä¸€è‡´æ€§æ¥æ¢å–ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ã€‚ä½†æ˜¯ä¸æ˜¯å®Œå…¨æ”¾å¼ƒæ•°æ®ä¸€è‡´æ€§ï¼Œè€Œæ˜¯ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥æ¢å–å¼±ä¸€è‡´æ€§ï¼Œé‡‡ç”¨åˆé€‚çš„æ–¹å¼æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚&lt;/p>
&lt;h2 id="åˆ†å¸ƒå¼äº‹åŠ¡å¸¸è§åœºæ™¯">åˆ†å¸ƒå¼äº‹åŠ¡å¸¸è§åœºæ™¯&lt;/h2>
&lt;h3 id="é“¶è¡Œè½¬è´¦">é“¶è¡Œè½¬è´¦&lt;/h3>
&lt;p>åœ¨é“¶è¡Œè½¬è´¦ä¸­ï¼Œæ‰£ä½™é¢å’Œæ·»åŠ ä½™é¢éœ€è¦åŒæ—¶æˆåŠŸã€‚æ‰£å‡è´¦æˆ·ä½™é¢æˆåŠŸï¼Œå¢åŠ è´¦æˆ·ä½™é¢å¤±è´¥ï¼›æ‰£å‡è´¦æˆ·ä½™é¢å¤±è´¥ï¼Œå¢åŠ è´¦æˆ·ä½™é¢æˆåŠŸï¼Œéƒ½æ˜¯ä¸å…è®¸å‘ç”Ÿçš„ã€‚&lt;/p>
&lt;h3 id="ä¸‹è®¢å•å’Œæ‰£åº“å­˜">ä¸‹è®¢å•å’Œæ‰£åº“å­˜&lt;/h3>
&lt;p>ä¸‹è®¢å•å’Œæ‰£åº“å­˜éœ€è¦ä¿æŒä¸€è‡´ï¼Œå¦‚æœå…ˆä¸‹è®¢å•ï¼Œæ‰£åº“å­˜å¤±è´¥ï¼Œé‚£ä¹ˆå°†ä¼šå¯¼è‡´è¶…å–ï¼›å¦‚æœä¸‹è®¢å•æ²¡æœ‰æˆåŠŸï¼Œæ‰£åº“å­˜æˆåŠŸï¼Œé‚£ä¹ˆä¼šå¯¼è‡´å°‘å–ã€‚&lt;/p>
&lt;h3 id="åŒæ­¥è¶…æ—¶">åŒæ­¥è¶…æ—¶&lt;/h3>
&lt;p>æœåŠ¡åŒ–çš„ç³»ç»Ÿé—´è°ƒç”¨å¸¸å¸¸å› ä¸ºç½‘ç»œé—®é¢˜å¯¼è‡´ç³»ç»Ÿé—´è°ƒç”¨è¶…æ—¶ï¼Œç³»ç»ŸAåŒæ­¥è°ƒç”¨ç³»ç»ŸBè¶…æ—¶ï¼Œç³»ç»ŸAå¯ä»¥æ˜ç¡®å¾—åˆ°è¶…æ—¶åé¦ˆï¼Œä½†æ˜¯æ— æ³•ç¡®å®šç³»ç»ŸBæ˜¯å¦å·²ç»å®Œæˆäº†é¢„å®šçš„åŠŸèƒ½æˆ–è€…æ²¡æœ‰å®Œæˆé¢„å®šçš„åŠŸèƒ½ã€‚äºæ˜¯ï¼Œç³»ç»ŸAå°±è¿·èŒ«äº†ï¼Œä¸çŸ¥é“åº”è¯¥ç»§ç»­åšä»€ä¹ˆï¼Œå¦‚ä½•åé¦ˆç»™ä½¿ç”¨æ–¹ã€‚&lt;/p>
&lt;h2 id="ä¸€è‡´æ€§åè®®">ä¸€è‡´æ€§åè®®&lt;/h2>
&lt;h3 id="2pc">2PC&lt;/h3>
&lt;h4 id="2-ä¸¤é˜¶æ®µæäº¤">2ï¸âƒ£ ä¸¤é˜¶æ®µæäº¤&lt;/h4>
&lt;p>ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰æŠŠåˆ†å¸ƒå¼äº‹åŠ¡åˆ†ä¸ºä¸¤ä¸ªè¿‡ç¨‹ï¼šå‡†å¤‡é˜¶æ®µ &lt;code>Prepare&lt;/code>ï¼Œæäº¤é˜¶æ®µ &lt;code>Commit&lt;/code> / å›æ»šé˜¶æ®µ &lt;code>Rollback&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç¬¬ä¸€é˜¶æ®µ &lt;code>prepare&lt;/code>&lt;/p>
&lt;p>æ‰§è¡Œå®é™…çš„ä¸šåŠ¡æ“ä½œï¼Œä½†ä¸æäº¤äº‹åŠ¡ï¼Œé”å®šèµ„æºã€‚&lt;/p>
&lt;p>äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTMï¼ŒTransaction Managerï¼‰å‘æ‰€æœ‰æœ¬åœ°èµ„æºç®¡ç†å™¨ï¼ˆRMï¼ŒResource Managerï¼‰å‘èµ·è¯·æ±‚ï¼Œè¯¢é—®æ˜¯å¦æ˜¯å°±ç»ª ready çŠ¶æ€ï¼Œæ‰€æœ‰çš„å‚ä¸è€…éƒ½å°†æœ¬åœ°äº‹åŠ¡èƒ½å¦æˆåŠŸçš„ä¿¡æ¯åé¦ˆç»™åè°ƒè€…ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¬¬äºŒé˜¶æ®µ &lt;code>commit / rollback&lt;/code>&lt;/p>
&lt;p>äº‹åŠ¡ç®¡ç†å™¨æ ¹æ®æ‰€æœ‰æœ¬åœ°èµ„æºç®¡ç†å™¨çš„åé¦ˆï¼Œé€šçŸ¥æ‰€æœ‰æœ¬åœ°èµ„æºç®¡ç†å™¨ï¼Œæ­¥è°ƒä¸€è‡´åœ°åœ¨æ‰€æœ‰åˆ†æ”¯ä¸Šæäº¤æˆ–å›æ»šã€‚&lt;/p>
&lt;p>åªè¦æœ‰ä¸€ä¸ª RM å¤±è´¥ï¼Œå°±ä¼šè¿›è¡Œå›æ»šæ“ä½œï¼›å¦åˆ™é€šçŸ¥æ‰€æœ‰ RM æäº¤äº‹åŠ¡ã€‚æäº¤äº‹åŠ¡åé‡Šæ”¾é”èµ„æºã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.letout.cn/p/distributed/transaction/2pc.jpg"
width="1000"
height="762"
srcset="https://blog.letout.cn/p/distributed/transaction/2pc_hu05f89294f333576b7a41e014b68a016a_38488_480x0_resize_q75_box.jpg 480w, https://blog.letout.cn/p/distributed/transaction/2pc_hu05f89294f333576b7a41e014b68a016a_38488_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="131"
data-flex-basis="314px"
>&lt;/p>
&lt;p>äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTMï¼‰ï¼šè´Ÿè´£åè°ƒå’Œç®¡ç†äº‹åŠ¡ï¼Œæ§åˆ¶ç€å…¨å±€äº‹åŠ¡å¹¶ç®¡ç†äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶åè°ƒå„ä¸ª RMã€‚&lt;/p>
&lt;p>èµ„æºç®¡ç†å™¨ï¼ˆRMï¼‰ï¼šäº‹åŠ¡çš„å‚ä¸è€…ï¼Œä¸€èˆ¬å¯ä»¥æŒ‡ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ï¼Œé€šè¿‡èµ„æºç®¡ç†å™¨å¯¹æ•°æ®åº“è¿›è¡Œæ§åˆ¶ï¼Œå³ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡ã€‚&lt;/p>
&lt;p>DTP æ¨¡å‹å®šä¹‰ TM å’Œ RM ä¹‹é—´çš„é€šè®¯æ¥å£è§„èŒƒå«åš XAï¼ˆå³æ•°æ®åº“æä¾›çš„ 2PC æ¥å£åè®®ï¼‰ï¼ŒåŸºäºæ•°æ®åº“çš„ XA åè®®æ¥å®ç°çš„ 2PC ç§°ä¸º XA æ–¹æ¡ˆã€‚&lt;/p>
&lt;h4 id="-seata-å®ç°-2pc">âš’ï¸ Seata å®ç° 2PC&lt;/h4>
&lt;p>&lt;a class="link" href="https://github.com/seata/seata" target="_blank" rel="noopener"
>Seata&lt;/a> æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äºåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹æä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ã€‚&lt;/p>
&lt;p>ğŸ“‡ Seata æŠŠä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ç†è§£æˆä¸€ä¸ªã€Œå…¨å±€äº‹åŠ¡ã€å’Œè‹¥å¹²ã€Œåˆ†æ”¯äº‹åŠ¡ã€ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å…¨å±€äº‹åŠ¡ï¼šåè°ƒå„ä¸ªåˆ†æ”¯äº‹åŠ¡è¾¾æˆä¸€è‡´&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ†æ”¯äº‹åŠ¡ï¼šå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå…³ç³»æ•°æ®åº“çš„æœ¬åœ°äº‹åŠ¡&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ğŸ—ƒï¸ Seata å®šä¹‰äº†ä¸‰ä¸ªç»„ä»¶å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>TCï¼ˆTransaction Corinatorï¼‰äº‹åŠ¡åè°ƒå™¨&lt;/p>
&lt;p>ç‹¬ç«‹çš„ä¸­é—´ä»¶ã€‚ç»´æŠ¤å…¨å±€äº‹åŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼šæ¥æ”¶ TM æŒ‡ä»¤å‘èµ·å…¨å±€äº‹åŠ¡çš„æäº¤ä¸å›æ»šï¼›è´Ÿè´£ä¸ RM é€šä¿¡åè°ƒå„ä¸ªåˆ†æ”¯äº‹åŠ¡çš„é€šçŸ¥ä¸å›æ»šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>TMï¼ˆTransaction Managerï¼‰äº‹åŠ¡ç®¡ç†å™¨&lt;/p>
&lt;p>jaråŒ…ã€‚åµŒå…¥åº”ç”¨ç¨‹åºä¸­å·¥ä½œï¼Œè´Ÿè´£å¼€å¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œæœ€ç»ˆå‘ TC å‘èµ·å…¨å±€æäº¤æˆ–å…¨å±€å›æ»šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>RMï¼ˆResource Managerï¼‰èµ„æºç®¡ç†å™¨&lt;/p>
&lt;p>æ§åˆ¶åˆ†æ”¯äº‹åŠ¡ã€‚æ¥æ”¶ TC çš„æŒ‡ä»¤ï¼Œé©±åŠ¨æœ¬åœ°äº‹åŠ¡çš„æäº¤æˆ–å›æ»šã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ğŸ“º åœ¨æ¶æ„æ–¹é¢ï¼Œ2PC æ–¹æ¡ˆçš„ RM å®é™…ä¸Šæ˜¯åœ¨æ•°æ®åº“å±‚é¢ï¼ŒRM æœ¬è´¨ä¸Šæ˜¯æ•°æ®åº“è‡ªèº«é€šè¿‡ XA åè®®å®ç°ï¼›seata ä¸­ RM ä»¥ jar åŒ…çš„å½¢å¼ä½œä¸ºä¸­é—´ä»¶å±‚éƒ¨ç½²åœ¨åº”ç”¨ç¨‹åºä¸€ä¾§ã€‚&lt;/p>
&lt;p>ğŸ—³ï¸ åœ¨ä¸¤é˜¶æ®µæäº¤æ–¹é¢ï¼Œ2PC åœ¨ç¬¬äºŒé˜¶æ®µå†³è®® commit / rollbackï¼Œäº‹åŠ¡æ€§èµ„æºé”è¦ä¿æŒåœ¨ç¬¬äºŒé˜¶æ®µå®Œæˆåé‡Šæ”¾ï¼›seata åœ¨ç¬¬ä¸€é˜¶æ®µå°±å°†äº‹åŠ¡æäº¤ï¼Œçœå»ç¬¬äºŒé˜¶æ®µæŒæœ‰é”çš„æ—¶é—´ï¼Œæé«˜æ•´ä½“æ•ˆç‡ã€‚&lt;/p>
&lt;h5 id="é…ç½®-seata-æœåŠ¡">é…ç½® Seata æœåŠ¡&lt;/h5>
&lt;ul>
&lt;li>å¯åŠ¨ seata ä¸­é—´ä»¶æœåŠ¡&lt;/li>
&lt;li>é…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒ&lt;/li>
&lt;li>åœ¨åº”ç”¨é…ç½® regsitry.confã€file.confï¼ˆåœ¨ seata ä¸­æ‹·è´ï¼‰&lt;/li>
&lt;li>ä½¿ç”¨ seata æœåŠ¡ï¼Œéœ€è¦åœ¨åŒæ–¹æ•°æ®åº“ä¸­åˆ›å»º &lt;code>undo log&lt;/code> è¡¨
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">undo_log&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">bigint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">AUTO_INCREMENT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">branch_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">bigint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">xid&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">rollback_info&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">longblob&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">log_status&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">log_created&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">log_modified&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">ext&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">UNIQUE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">ux_undo_log&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">xid&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">branch_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ENGINE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">InnoDB&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">AUTO_INCREMENT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CHARSET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h5 id="åˆ›å»ºä»£ç†æ•°æ®æº">åˆ›å»ºä»£ç†æ•°æ®æº&lt;/h5>
&lt;p>æ¯ä¸ª RM é€šè¿‡ DataSourceProxy ä½¿ç”¨ä»£ç†è¿æ¥ã€‚ä¸ TC è¿›è¡Œé€šä¿¡äº¤äº’ã€è®°å½• undo_log ç­‰ã€‚&lt;/p>
&lt;p>ç¬¬ä¸€é˜¶æ®µä¸šåŠ¡æ“ä½œç”Ÿæˆå¯¹äºçš„ undo_logï¼Œå°† undo_log å’Œä¸šåŠ¡æ•°æ®æ”¾åœ¨ä¸€ä¸ªæœ¬åœ°äº‹åŠ¡æäº¤ï¼ˆundo_log è®°å½•äº†ä¿®æ”¹å‰çš„å€¼ï¼ŒåŒæ—¶æäº¤åé‡Šæ”¾é”èµ„æºï¼‰ã€‚&lt;/p>
&lt;p>TM å¼€å¯å…¨å±€äº‹åŠ¡ï¼Œä¼šå°†å…¨å±€äº‹åŠ¡ID &lt;code>XID&lt;/code> æ”¾åœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶é€šè¿‡è¿œç¨‹è°ƒç”¨ä¼ å…¥ä¸‹æ¸¸çš„å„ä¸ªåˆ†æ”¯äº‹åŠ¡ã€‚&lt;/p>
&lt;p>ç¬¬äºŒé˜¶æ®µï¼ˆ1ï¼‰äº‹åŠ¡æäº¤ï¼ŒTC é€šçŸ¥å„ä¸ªåˆ†æ”¯å®Œæˆäº‹åŠ¡ï¼Œåªéœ€è¦åˆ é™¤å¯¹åº”çš„undo_logï¼ˆç¬¬ä¸€é˜¶æ®µå·²ç»åˆ†æ”¯æäº¤ï¼‰ï¼›ï¼ˆ2ï¼‰äº‹åŠ¡å›æ»šï¼Œé€šè¿‡ XID å’Œ Branch ID æ‰¾åˆ°å¯¹åº”çš„ undo_log ç”Ÿæˆåå‘ SQL æ‰§è¡Œå³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@Configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">DatabaseConfiguration&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Bean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@ConfigurationProperties&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;spring.datasource.ds0&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">DruidDataSource&lt;/span> &lt;span class="nf">ds0&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DruidDataSource&lt;/span> &lt;span class="n">druidDataSource&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DruidDataSource&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">druidDataSource&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Bean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Primary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">DataSource&lt;/span> &lt;span class="nf">dataSource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">DruidDataSource&lt;/span> &lt;span class="n">ds0&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DataSourceProxy&lt;/span> &lt;span class="n">pds0&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DataSourceProxy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ds0&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">pds0&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="åŒæ–¹ä¸šåŠ¡å®ç°">åŒæ–¹ä¸šåŠ¡å®ç°&lt;/h5>
&lt;p>&lt;code>@GlobalTransactional&lt;/code> å¼€å¯å…¨å±€äº‹åŠ¡ã€‚&lt;code>GlobalTransactinalInterceptor&lt;/code> ä¼šæ‹¦æˆª &lt;code>@GlobalTransactional&lt;/code> æ³¨è§£çš„æ–¹æ³•ï¼Œç”Ÿæˆå…¨å±€äº‹åŠ¡ID&lt;code>XID&lt;/code>ã€‚&lt;/p>
&lt;p>XID ä¼šåœ¨æ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ä¸­ä¼ é€’ï¼Œåœ¨è¿œç¨‹è°ƒç”¨æ—¶ spring-cloud-alibaba-seata ä¼šæ‹¦æˆª Feign è°ƒç”¨å°† XID ä¼ é€’åˆ°ä¸‹æ¸¸æœåŠ¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è½¬è´¦æ–¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nd">@Service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@Sl4j&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">AccountServiceImpl&lt;/span> &lt;span class="kd">implements&lt;/span> &lt;span class="n">AccountInfoService&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">AccountInfoDao&lt;/span> &lt;span class="n">accountInfoDao&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">BankClient&lt;/span> &lt;span class="n">bankClinet&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * è½¬è´¦ä¸šåŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Transactional&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@GlobalTranactional&lt;/span> &lt;span class="c1">// å¼€å¯å…¨å±€äº‹åŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">updateAccountBalance&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">accountNo&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">BigDecimal&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æœ¬è´¦æˆ·æ‰£æ¬¾
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">accountInfoDao&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">updateAccountBalance&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">accountNo&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç›®æ ‡è´¦æˆ·å¢åŠ ä½™é¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">remoteRes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">bankClinet&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">transfer&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;fallback&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remoteRes&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="c1">// è¿œç¨‹å¤±è´¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">RuntimeException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;...&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span> &lt;span class="c1">// æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸å›æ»šäº‹åŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ”¶æ¬¾æ–¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å¦ä¸€ä¸ªæœåŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nd">@RestController&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">BackController&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">AccountInfoService&lt;/span> &lt;span class="n">accountInfoService&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¥æ”¶è½¬è´¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nd">@GetMapping&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/transfer&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="nf">transfer&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">BigDecimal&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">accountInfoService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">updateAccountBalance&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;get:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ---
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@Service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@Slf4j&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">AccountInfoServiceImpl&lt;/span> &lt;span class="kd">implements&lt;/span> &lt;span class="n">AccountInfoService&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">AccountInfoDao&lt;/span> &lt;span class="n">accountInfoDao&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½œä¸ºäº‹åŠ¡åˆ†æ”¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä¸éœ€è¦å¼€å¯å…¨å±€äº‹åŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Transactional&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">updateAccountBalance&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">accountNo&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">BigDecimal&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// RootContext.getXID()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">info&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;XIDï¼š{}&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">RootContext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getXID&lt;/span>&lt;span class="o">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¢åŠ é‡‘é¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">accountInfoDao&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">updateAccountBalance&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">accountNo&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-tcc">ğŸ›ï¸ TCC&lt;/h3>
&lt;p>TCC &lt;code>Try - Confirm - Cancel&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Try é˜¶æ®µ&lt;/p>
&lt;p>å°è¯•æ‰§è¡Œã€‚å®Œæˆæ‰€æœ‰çš„ä¸šåŠ¡æ£€æŸ¥ï¼Œé¢„ç•™å¿…é¡»çš„ä¸šåŠ¡èµ„æºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Confirm é˜¶æ®µ&lt;/p>
&lt;p>ç¡®è®¤æ‰§è¡ŒçœŸæ­£çš„ä¸šåŠ¡ã€‚è¯¥é˜¶æ®µä¸ä¼šåšä»»ä½•ä¸šåŠ¡æ£€æŸ¥ï¼Œåªä½¿ç”¨ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æºã€‚&lt;/p>
&lt;p>åœ¨ TCC ä¸­ï¼Œé€šå¸¸è®¤ä¸º Try é˜¶æ®µæˆåŠŸåï¼ŒConfirm ä¸€å®šä¼šæˆåŠŸï¼Œå¦‚æœ Confirm é˜¶æ®µå‡ºé”™ï¼Œéœ€è¦è¿›è¡Œé‡è¯•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Cancel é˜¶æ®µ&lt;/p>
&lt;p>å–æ¶ˆæ‰§è¡Œã€‚é‡Šæ”¾ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æºã€‚&lt;/p>
&lt;p>åœ¨ TCC ä¸­ï¼Œè®¤ä¸º Cancel ä¸€å®šä¼šæˆåŠŸï¼Œå¦‚æœå¤±è´¥ï¼Œéœ€è¦é‡è¯•ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åœ¨ Try é˜¶æ®µï¼Œæ˜¯å¯¹ä¸šåŠ¡ç³»ç»Ÿè¿›è¡Œæ£€æŸ¥å’Œèµ„æºé¢„è§ˆï¼Œå¦‚è®¢å•å’Œå­˜å‚¨æ“ä½œï¼Œéœ€è¦æ£€æŸ¥åº“å­˜å‰©ä½™æ•°é‡æ˜¯å¦å¯ç”¨ï¼Œå¹¶è¿›è¡Œèµ„æºé¢„ç•™ã€‚&lt;/p>
&lt;p>åŸºäº TCC å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¼šå°†åŸæ¥åªéœ€è¦ä¸€ä¸ªæ¥å£çš„å®ç°é€»è¾‘æ‹†åˆ†ä¸º Tryã€Confirmã€Cancel ä¸‰ä¸ªæ¥å£ï¼Œç›¸å¯¹æ¥è¯´ä»£ç å®ç°å¤æ‚åº¦è¾ƒé«˜ã€‚&lt;/p>
&lt;h2 id="åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆ">åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆ&lt;/h2>
&lt;h3 id="å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§">å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§&lt;/h3>
&lt;p>å¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§æ˜¯æŒ‡ï¼Œå½“äº‹åŠ¡å‘èµ·æ–¹æ‰§è¡Œå®Œæœ¬åœ°äº‹åŠ¡åå¹¶å‘å‡ºä¸€æ¡æ¶ˆæ¯ï¼Œäº‹åŠ¡å‚ä¸æ–¹ï¼ˆæ¶ˆæ¯æ¶ˆè´¹è€…ï¼‰ä¸€å®šèƒ½å¤Ÿæ¥æ”¶åˆ°æ¶ˆæ¯å¹¶å¤„ç†äº‹åŠ¡æˆåŠŸï¼Œæœ€ç»ˆäº‹åŠ¡è¦è¾¾åˆ°ä¸€è‡´ã€‚&lt;/p>
&lt;h4 id="æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆ">æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆ&lt;/h4>
&lt;p>åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­åˆ›å»ºä¸€å¼ â€œæ¶ˆæ¯è¡¨â€ï¼Œæ‰«è¡¨è¿›è¡Œå‘é€æ¶ˆæ¯&lt;/p>
&lt;h4 id="rocketmq-æ–¹æ¡ˆ">RocketMQ æ–¹æ¡ˆ&lt;/h4>
&lt;p>åœ¨ RocketMQ 4.3+ ä¹‹åï¼Œæ­£å¼æ”¯æŒäº‹åŠ¡æ¶ˆæ¯ã€‚&lt;/p>
&lt;p>äº‹åŠ¡æ¶ˆæ¯è§£å†³ Producer ç«¯æ¶ˆæ¯çš„å‘é€å’Œæœ¬åœ°äº‹åŠ¡æ‰§è¡Œçš„åŸå­æ€§é—®é¢˜ã€‚&lt;/p>
&lt;h3 id="æœ€å¤§åŠªåŠ›é€šçŸ¥">æœ€å¤§åŠªåŠ›é€šçŸ¥&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="å‚è€ƒ">å‚è€ƒ&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.jianshu.com/p/1156151e20c8" target="_blank" rel="noopener"
>https://www.jianshu.com/p/1156151e20c8&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://xiaomi-info.github.io/2020/01/02/distributed-transaction/" target="_blank" rel="noopener"
>https://xiaomi-info.github.io/2020/01/02/distributed-transaction/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/u010425776/article/details/79516298" target="_blank" rel="noopener"
>https://blog.csdn.net/u010425776/article/details/79516298&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://mp.weixin.qq.com/s/XknegP66mnYboiBx556Kzw" target="_blank" rel="noopener"
>https://mp.weixin.qq.com/s/XknegP66mnYboiBx556Kzw&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://mp.weixin.qq.com/s/ujRRtdLOeKEHsHrtDRNXGA" target="_blank" rel="noopener"
>https://mp.weixin.qq.com/s/ujRRtdLOeKEHsHrtDRNXGA&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>