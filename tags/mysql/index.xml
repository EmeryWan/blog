<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>MySQL on ä¸€å±‚</title><link>https://emerywan.github.io/blog/tags/mysql/</link><description>Recent content in MySQL on ä¸€å±‚</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Tue, 07 Mar 2023 18:02:02 +0800</lastBuildDate><atom:link href="https://emerywan.github.io/blog/tags/mysql/index.xml" rel="self" type="application/rss+xml"/><item><title>InnoDB ç¼“å†²æ±  Buffer Pool</title><link>https://emerywan.github.io/blog/p/mysql/innodb/buffer-pool/</link><pubDate>Tue, 07 Mar 2023 18:02:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/innodb/buffer-pool/</guid><description>&lt;img src="https://emerywan.github.io/blog/p/mysql/innodb/buffer-pool/bufferpool.webp" alt="Featured image of post InnoDB ç¼“å†²æ±  Buffer Pool" />&lt;h2 id="-buffer-pool">ğŸ§Š Buffer Pool&lt;/h2>
&lt;p>MySQL çš„æ•°æ®æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„ï¼Œä¸ºäº†æå‡è¯»å†™æ€§èƒ½ï¼ŒInnoDB è®¾è®¡äº†ä¸€ä¸ªç¼“å­˜æ±  Buffer Poolã€‚&lt;/p>
&lt;p>æœ¬è´¨ä¸Šæ˜¯ InnoDB å‘æ“ä½œç³»ç»Ÿç”³è¯·çš„ä¸€æ®µè¿ç»­å†…å­˜ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡ &lt;code>innodb_buffer_pool_size&lt;/code> æ¥è¿›è¡Œè°ƒæ•´å¤§å°ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å½“è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å·²ç»åœ¨ Buffer Pool ä¸­ï¼Œä¼šç›´æ¥è¿”å›ï¼›å¦‚æœä¸åœ¨ï¼Œå°±ä¼šå°†æ•°æ®&lt;strong>å®Œæ•´çš„é¡µä¿¡æ¯&lt;/strong>å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¼šä¿®æ”¹ Buffer Pool ä¸­çš„ç¼“å­˜é¡µï¼ˆ-&amp;gt; å˜æˆè„é¡µï¼‰ï¼Œåœ¨åˆé€‚çš„æ—¶æœºï¼Œç”±åå°çº¿ç¨‹å†™å…¥åˆ°ç£ç›˜ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="-ç»“æ„">ğŸ§© ç»“æ„&lt;/h3>
&lt;p>Buffer Pool ä¸­çš„è¿ç»­å†…å­˜ï¼Œä¼šè¢«åˆ†å‰²æˆä¸€ä¸ªä¸ªçš„é¡µï¼Œå’Œ InnoDB çš„é¡µå¤§å°ä¸€æ ·ï¼Œéƒ½æ˜¯ &lt;code>16KB&lt;/code>ï¼Œç§°ä¸ºç¼“å­˜é¡µã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/cache-page.webp"
width="962"
height="234"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/cache-page_hucd01fda075157d782d9171d9e071f31a_7000_480x0_resize_q75_h2_box_2.webp 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/cache-page_hucd01fda075157d782d9171d9e071f31a_7000_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="411"
data-flex-basis="986px"
>&lt;/p>
&lt;p>æ¯ä¸€ä¸ªç¼“å­˜é¡µéƒ½ä¼šç”±ä¸€ä¸ªæ§åˆ¶å—è¿›è¡Œç®¡ç†ï¼ˆä½äº Buffer Pool çš„æœ€å‰é¢ï¼‰ï¼Œæ¯ä¸ªç¼“å­˜é¡µä¸æ§åˆ¶å—ä¸€ä¸€å¯¹åº”ã€‚&lt;/p>
&lt;h3 id="-å†…å®¹">ğŸ§© å†…å®¹&lt;/h3>
&lt;p>åœ¨ Buffer Pool ä¸­ï¼Œä¸»è¦åŒ…æ‹¬äº†å…­éƒ¨åˆ†çš„å†…å®¹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ•°æ®é¡µ&lt;/li>
&lt;li>ç´¢å¼•é¡µ&lt;/li>
&lt;li>æ’å…¥ç¼“å†²&lt;/li>
&lt;li>undo é¡µ&lt;/li>
&lt;li>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•&lt;/li>
&lt;li>é”ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/bufferpool.webp"
width="812"
height="377"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/bufferpool_hu9753cf048aa8ef6ecf388c9b29af095f_8518_480x0_resize_q75_h2_box_2.webp 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/bufferpool_hu9753cf048aa8ef6ecf388c9b29af095f_8518_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="215"
data-flex-basis="516px"
>&lt;/p>
&lt;h2 id="-ç®¡ç†-buffer-pool-çš„é“¾è¡¨">ğŸ‘·â€â™‚ï¸ ç®¡ç† Buffer Pool çš„é“¾è¡¨&lt;/h2>
&lt;p>åœ¨ MySQL æœåŠ¡è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿ç»­çš„ BuuferPool å†…å­˜ç©ºé—´çš„é¡µé¢æœ‰ç©ºé—²çš„ï¼Œä¹Ÿæœ‰éç©ºé—²çš„ï¼Œä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿçš„æ‰¾åˆ°éœ€è¦çš„é¡µé¢ï¼Œé˜²æ­¢ä¸€ä¸ªä¸€ä¸ªçš„éå†æµªè´¹æ—¶é—´ï¼Œ
InnoDB ä½¿ç”¨äº†è®¸å¤šğŸ”—&lt;strong>é“¾è¡¨&lt;/strong>ç®¡ç† Buffer Pool çš„é¡µï¼ˆç©ºé—²é¡µã€å¹²å‡€é¡µã€è„é¡µï¼‰ã€‚&lt;/p>
&lt;h3 id="-free-é“¾è¡¨----ç®¡ç†ç©ºé—²é¡µ">â›“ï¸ Free é“¾è¡¨ &amp;ndash; ç®¡ç†ç©ºé—²é¡µ&lt;/h3>
&lt;p>ğŸ’¡ ç©ºé—²é¡µï¼šBuffer Pool å†…å­˜ä¸­æœªè¢«ä½¿ç”¨çš„é¡µã€‚&lt;/p>
&lt;p>ä¸ºäº†èƒ½å¿«é€Ÿæ‰¾åˆ°ç©ºé—²çš„ç¼“å­˜é¡µï¼Œä½¿ç”¨ Free ç©ºé—²é“¾è¡¨ç®¡ç†ç©ºé—²é¡µã€‚&lt;/p>
&lt;p>Free é“¾è¡¨çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸ªä¸ªç©ºé—²é¡µæ‰€å¯¹åº”çš„æ§åˆ¶å—ã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/free-list.webp"
width="1217"
height="597"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/free-list_hu2194ab0c933cdf7ef8a007d7c52bad5f_28012_480x0_resize_q75_h2_box_2.webp 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/free-list_hu2194ab0c933cdf7ef8a007d7c52bad5f_28012_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="203"
data-flex-basis="489px"
>&lt;/p>
&lt;p>å½“éœ€è¦ä»ç£ç›˜ä¸­åŠ è½½ä¸€ä¸ªé¡µåˆ° Buffer Pool æ—¶ï¼Œå°±ä» Free é“¾è¡¨ä¸­æ‰¾åˆ°ä¸€ä¸ªç©ºé—²é¡µï¼ŒåŠ è½½æ•°æ®å¹¶æ›´æ”¹æ§åˆ¶å—çš„ä¿¡æ¯ï¼Œå¹¶ä» Free é“¾è¡¨ä¸­ç§»é™¤ã€‚&lt;/p>
&lt;h3 id="-flush-é“¾è¡¨----ç®¡ç†è„é¡µ">â›“ï¸ Flush é“¾è¡¨ &amp;ndash; ç®¡ç†è„é¡µ&lt;/h3>
&lt;p>ğŸ’¡ è„é¡µï¼ˆdirty pageï¼‰ï¼šä¿®æ”¹äº†ç¼“å­˜é¡µä¸­çš„æ•°æ®ï¼Œä¸ç£ç›˜ä¸­çš„é¡µæ•°æ®ä¸ä¸€è‡´ï¼Œç§°ä¸ºè„é¡µã€‚&lt;/p>
&lt;p>è¢«ä¿®æ”¹è¿‡çš„ç¼“å­˜é¡µçš„æ§åˆ¶å—ï¼Œä¼šè¢«ä½œä¸ºèŠ‚ç‚¹åŠ å…¥åˆ° Flush é“¾è¡¨ã€‚&lt;/p>
&lt;p>Flush é“¾è¡¨çš„ç»“æ„å’Œ Free é“¾è¡¨å·®ä¸å¤šã€‚åå°çº¿ç¨‹ä¼šåœ¨ä¸€å®šçš„æ—¶æœºï¼Œé€šè¿‡éå† Flush é“¾è¡¨ï¼Œå°†è„é¡µå†™å…¥ç£ç›˜ï¼ˆWALï¼‰ã€‚&lt;/p>
&lt;h3 id="-lru-é“¾è¡¨----ç®¡ç†è„é¡µå¹²å‡€é¡µ">â›“ï¸ LRU é“¾è¡¨ &amp;ndash; ç®¡ç†è„é¡µ&amp;amp;å¹²å‡€é¡µ&lt;/h3>
&lt;p>ğŸ’¡ å¹²å‡€é¡µï¼ˆclean pageï¼‰ï¼šåŠ è½½äº†æ•°æ®æœªä½œä¿®æ”¹çš„ç¼“å­˜é¡µã€‚&lt;/p>
&lt;p>ğŸ’¡ è„é¡µï¼ˆdirty pageï¼‰ï¼šåŠ è½½äº†æ•°æ®åšäº†ä¿®æ”¹çš„ç¼“å­˜é¡µã€‚&lt;/p>
&lt;p>Buffer Pool çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œä¸å¯èƒ½å°†æ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨å†…å­˜ä¸­ï¼ŒinnoDB é€šè¿‡ LRU ç®—æ³•ï¼ˆä¿®æ”¹è¿‡çš„ï¼‰ï¼Œå°†é¢‘ç¹è®¿é—®çš„æ•°æ®åœç•™åœ¨ Buffer Pool ä¸­ã€‚&lt;/p>
&lt;p>ç®€å•çš„ LRU ç®—æ³•åœ¨ MySQL ä¸­å¯èƒ½ä¼šå¯¼è‡´ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ğŸ˜µ é¢„è¯»å¤±æ•ˆ&lt;/p>
&lt;p>MySQL ä¼šå°†è¢«åŠ è½½é¡µçš„ä¸´è¿‘é¡µä¸€åŒåŠ è½½åˆ°å†…å­˜ï¼ˆä¸ºäº†å‡å°‘ç£ç›˜ IOï¼‰ï¼Œå¦‚æœè¿™äº›é¡µæ²¡æœ‰è¢«è®¿é—®ï¼Œè¿™ä¸ªé¢„è¯»ç›¸å½“äºæµªè´¹äº†ã€‚&lt;/p>
&lt;p>ï¼ˆé€šè¿‡å°† LRU é“¾è¡¨åˆ’åˆ†ä¸º young åŒºå’Œ old åŒºï¼ŒåŠ è½½çš„æ•°æ®ç°æ”¾åˆ° old åŒºåŸŸï¼Œè¢«è®¿é—®åˆ°ä¹‹åï¼Œæ‰è¢«åŠ å…¥ young åŒºåŸŸï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ¤¢ Buffer Pool æ±¡æŸ“&lt;/p>
&lt;p>ä¸€ä¸ª SQL æ‰«æå¤§é‡çš„æ•°æ®ï¼ˆå¦‚ç´¢å¼•å¤±æ•ˆæ—¶ï¼Œè¿›è¡Œå…¨è¡¨æ‰«ææ¥åˆ¤æ–­æ¡ä»¶ï¼‰ï¼Œç”±äºé“¾è¡¨ç©ºé—´æœ‰é™ï¼Œå¯èƒ½ä¼šæŠŠå†…å­˜ä¸­çš„æ‰€æœ‰é¡µå…¨éƒ¨æ›¿æ¢å‡ºå»ï¼Œå¯¼è‡´çƒ­ç‚¹æ•°æ®å…¨éƒ¨å¤±æ•ˆï¼Œåç»­ç¼“å­˜å…¨éƒ¨æ²¡æœ‰å‘½ä¸­ï¼Œå¯¼è‡´å¤§é‡ç£ç›˜ IOã€‚&lt;/p>
&lt;p>ï¼ˆåŠ å¤§æ•°æ®æ”¾å…¥ young åŒºçš„æ¡ä»¶ï¼ŒåŠ è½½åˆ° old åŒºåŸŸçš„æ•°æ®ï¼Œåœç•™æ—¶é—´è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œæ‰æœ‰èµ„æ ¼æ”¾åˆ° young åŒºåŸŸï¼‰&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/lru-list.webp"
width="842"
height="212"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/lru-list_hub80bcb1068b40da49c3759e6a067b1e3_15066_480x0_resize_q75_h2_box_2.webp 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/buffer-pool/lru-list_hub80bcb1068b40da49c3759e6a067b1e3_15066_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="397"
data-flex-basis="953px"
>&lt;/p>
&lt;p>InnoDB çš„ LRU é“¾è¡¨è¢«åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼šï¼ˆ1ï¼‰çƒ­æ•°æ® young åŒºåŸŸï¼›ï¼ˆ2ï¼‰å†·æ•°æ® old åŒºåŸŸã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ğŸ“ƒ é¢„è¯»çš„é¡µåªä¼šåŠ è½½åˆ° old åŒºåŸŸçš„å¤´éƒ¨ï¼Œå½“è¯¥é¡µçœŸæ­£è¢«è®¿é—®çš„æ—¶å€™ï¼Œæ‰ä¼šè¢«ç§»åŠ¨åˆ° young åŒºçš„å¤´éƒ¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â±ï¸ ç§»åŠ¨åˆ° young åŒºåŸŸçš„æ¡ä»¶é™¤äº†è¢«è®¿é—®å¤–ï¼Œè¿˜éœ€è¦åˆ¤æ–­åœç•™åœ¨ old åŒºåŸŸçš„æ—¶é—´ã€‚ï¼ˆé˜²æ­¢å…¨è¡¨æ‰«ææ—¶ï¼Œè¢«è®¿é—®ä¸€æ¬¡åå°±ä¸åœ¨ä½¿ç”¨ï¼‰ã€‚å½“è®¿é—®çš„ç¼“å­˜é¡µå·²ç»åœ¨ old åŒºåŸŸåœç•™æ—¶é—´è¶…è¿‡é˜ˆå€¼ &lt;code>innodb_old_blocks_time=1000ms&lt;/code> æ—¶ï¼Œæ‰ä¼šè¢«æ’å…¥åˆ° young åŒºå¤´éƒ¨ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="-è„é¡µåˆ·ç›˜çš„æ—¶æœº">ğŸ’¿ è„é¡µåˆ·ç›˜çš„æ—¶æœº&lt;/h2>
&lt;p>å½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¼šè®°å½•å¯¹åº”çš„ redo log &amp;amp; bin logï¼ˆWALï¼‰ï¼Œä¿®æ”¹çš„æ˜¯ Buffer Pool ä¸­çš„ç¼“å­˜é¡µï¼Œç„¶åå°†å…¶è®¾ç½®ä¸ºè„é¡µå¹¶åŠ å…¥ Flush é“¾è¡¨ï¼Œç”±åå°çº¿ç¨‹åˆ·æ–°æ•°æ®åˆ°ç£ç›˜ã€‚&lt;/p>
&lt;p>ä»¥ä¸‹æƒ…å†µä¼šä¸»åŠ¨åˆ·æ–°æ•°æ®åˆ°ç£ç›˜ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ğŸ—ï¸ å½“ redo log æ—¥å¿—å†™æ»¡æ—¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ—ï¸ å½“ Buffer Pool ç©ºé—´ä¸è¶³æ—¶ï¼Œä¼šæ·˜æ±°ä¸€äº›ç¼“å­˜é¡µï¼Œå¦‚æœæ—¶è„é¡µï¼Œä¼šåˆ·å…¥ç£ç›˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ—ï¸ å½“ MySQL è®¤ä¸ºç©ºé—²æ—¶ï¼Œå¼‚æ­¥åœ°å°†è„é¡µåˆ·æ–°åˆ°ç£ç›˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ—ï¸ å½“ MySQL ä¸»åŠ¨æ­£å¸¸å…³é—­å‰&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>MySQL å¤åˆ¶</title><link>https://emerywan.github.io/blog/p/mysql/master-slave-replication/</link><pubDate>Thu, 02 Mar 2023 12:02:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/master-slave-replication/</guid><description>&lt;img src="https://emerywan.github.io/blog/p/mysql/master-slave-replication/copy.png" alt="Featured image of post MySQL å¤åˆ¶" />&lt;h2 id="-ä¸»ä»å¤åˆ¶">ğŸ“‘ ä¸»ä»å¤åˆ¶&lt;/h2>
&lt;p>ä¸»ä»å¤åˆ¶æŒ‡ä¸»æœåŠ¡å™¨ï¼ˆmaster serverï¼‰ä¸Šï¼Œä»»ä½•ä¿®æ”¹å’Œæ•°æ®ç»“æ„å˜æ›´çš„äº‹ä»¶ï¼Œéƒ½ä¼šè¢«å†™å…¥åˆ°æ—¥å¿—æ–‡ä»¶ &lt;code>bin log&lt;/code> ä¸­ï¼Œä»æœåŠ¡å™¨ï¼ˆslave serverï¼‰è¯»å–ä¸»æœåŠ¡å™¨ä¸Šçš„æ—¥å¿—æ–‡ä»¶ä¸­çš„äº‹ä»¶å˜æ›´ï¼Œå¹¶åœ¨æœ¬åœ°é‡æ”¾æ‰§è¡Œã€‚&lt;/p>
&lt;p>é€šè¿‡ä¸»ä»å¤åˆ¶ï¼Œèƒ½å¤Ÿæé«˜æ•°æ®åº“çš„&lt;strong>è¯»&lt;/strong>æ€§èƒ½ã€‚ä¸»åº“å¤åˆ¶å†™ï¼Œä»åº“å¤åˆ¶è¯»ã€‚&lt;/p>
&lt;p>å¹¶ä¸é€‚åˆæ¥æ‰©å±•å†™æ“ä½œã€‚ä¾‹å¦‚åœ¨ä¸€ä¸»å¤šä»çš„æ¶æ„ä¸­ï¼Œå†™æ“ä½œè¦è¢«æ‰§è¡Œå¤šæ¬¡ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ä¼šå–å†³äºå†™å…¥æœ€æ…¢çš„é‚£ä¸ªã€‚&lt;/p>
&lt;p>ğŸ’¡ å¸¸è§ç”¨é€”ï¼š&lt;/p>
&lt;ul>
&lt;li>æ•°æ®å¤‡ä»½&lt;/li>
&lt;li>æ•°æ®åˆ†å‘&lt;/li>
&lt;li>æé«˜è¯»æ€§èƒ½&lt;/li>
&lt;li>é«˜å¯ç”¨å’Œæ•…éšœåˆ‡æ¢&lt;/li>
&lt;/ul>
&lt;h2 id="-å¤åˆ¶åŸç†">ğŸ“– å¤åˆ¶åŸç†&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>ğŸ‘£ ä¸»åº“ä¸­çš„æ•°æ®å˜æ›´ä¼šè®°å½•åˆ° binlog ä¸­ï¼Œä¸»åº“ä¼šåˆ›å»ºä¸€ä¸ª binlog dump threadï¼Œå°† binlog ä¼ è¾“åˆ°ä»åº“&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ‘£ ä»åº“åˆ›å»º IO çº¿ç¨‹ï¼Œå°†ä¸»åº“ä¼ æ¥çš„ binlog å†™å…¥åˆ°è‡ªå·±çš„ relay log ä¸­ç»§æ—¥å¿—&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ‘£ ä»åº“åˆ›å»º SQL çº¿ç¨‹ï¼Œä» relay log ä¸­è¯»å–æ•°æ®ï¼Œé‡æ”¾åˆ°æ•°æ®åº“ä¸­&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è¿™é‡Œçš„ IO çº¿ç¨‹ å’Œ SQL çº¿ç¨‹çš„å·¥ä½œæ˜¯è§£è€¦çš„ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/master-slave-replication/copy.png"
width="1080"
height="603"
srcset="https://emerywan.github.io/blog/blog/p/mysql/master-slave-replication/copy_hu2815b7bcceb4bc2e593bd903d3b2a777_501311_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/master-slave-replication/copy_hu2815b7bcceb4bc2e593bd903d3b2a777_501311_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="429px"
>&lt;/p>
&lt;h2 id="-å¤åˆ¶æ ¼å¼">ğŸ« å¤åˆ¶æ ¼å¼&lt;/h2>
&lt;p>MySQL æœ‰ä¸‰ç§æ–¹å¼è®°å½• binlogï¼ŒåŒæ ·åœ¨å¤åˆ¶æ—¶ï¼Œä¹Ÿå¯¹åº”æœ‰ä¸‰ç§å¤åˆ¶æ ¼å¼ã€‚&lt;/p>
&lt;p>ğŸ’¡ å¦‚æœéœ€è¦å®‰å…¨çš„æ•°æ®å¤åˆ¶æ–¹æ³•ï¼Œæ¨èä½¿ç”¨&lt;strong>åŸºäºè¡Œ&lt;/strong>çš„æ ¼å¼å¤åˆ¶ï¼Œé™¤éæŸäº›åœºæ™¯ä¸‹æ˜ç¡®éœ€è¦ä¸´æ—¶ä½¿ç”¨åŸºäºè¯­å¥çš„æ ¼å¼ã€‚&lt;/p>
&lt;h3 id="-åŸºäºè¯­å¥-statement">ğŸ“ƒ åŸºäºè¯­å¥ statement&lt;/h3>
&lt;p>é€šè¿‡é‡æ–°æ‰§è¡Œä¸»æœåŠ¡å™¨ä¸­æ‰§è¡Œè¿‡çš„ SQL è¯­å¥æ¥å®Œæˆå¤åˆ¶çš„ã€‚&lt;/p>
&lt;p>ä¼˜ç‚¹ğŸ™‹â€ æ˜¯ç®€å•ç´§å‡‘ï¼Œä¾‹å¦‚æ‰¹é‡æ›´æ–°äº† 1000 æ¡æ•°æ®ï¼Œä¹Ÿåªéœ€è¦ä¸€æ¡è¯­å¥ï¼ŒèŠ‚çº¦ IOã€‚&lt;/p>
&lt;p>ç¼ºç‚¹ğŸ™…â€â™‚ï¸ æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ï¼ˆä¾‹å¦‚ä½¿ç”¨äº† now() è¿™æ ·çš„å‡½æ•°ï¼‰ã€‚&lt;/p>
&lt;h3 id="-åŸºäºè¡Œ-row">ğŸ““ åŸºäºè¡Œ row&lt;/h3>
&lt;p>åŸºäºè¡Œçš„æ—¥å¿—ä¸­ï¼Œè®°å½•äº†è¯¥è¡Œæ•°æ®å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼ŒåŒ…å«è¯¥è¡Œä¿®æ”¹å‰å’Œä¿®æ”¹åçš„æƒ…å†µã€‚åœ¨æ‰§è¡Œæ—¶ï¼Œè¿›è¡Œè§£æï¼Œæ‰¾åˆ°éœ€è¦å˜æ›´çš„è®°å½•è¿›è¡Œæ“ä½œã€‚&lt;/p>
&lt;p>ä¼˜ç‚¹ğŸ™‹ æ˜¯æ•°æ®å…·æœ‰å¼ºç¡®å®šæ€§ã€‚&lt;/p>
&lt;p>ç¼ºç‚¹ğŸ™…â€â™‚ï¸ æ˜¯å¯èƒ½ä¼šå¯¼è‡´æ—¥å¿—ä¸­è®°å½•å¤§é‡æ•°æ®ã€‚æ¯”å¦‚åœ¨æ‰¹é‡æ›´æ–°æ—¶ï¼Œå‡ºç°å¤§é‡çš„è¡Œçš„ä¿®æ”¹ï¼Œä½†æ˜¯è¯­å¥å¯èƒ½åªæœ‰ä¸€æ¡ã€‚&lt;/p>
&lt;h3 id="-æ··åˆæ¨¡å¼-mix">ğŸ–‡ï¸ æ··åˆæ¨¡å¼ mix&lt;/h3>
&lt;p>â€œè¯•å›¾â€ æ··åˆæ¨¡å¼ç»“åˆä»¥ä¸Šä¸¤ç§æ ¼å¼çš„ä¼˜ç‚¹ã€‚ï¼ˆå¯èƒ½ä¼šæœ‰ğŸ˜µ&lt;strong>ä¸ç¨³å®š&lt;/strong>çš„æƒ…å†µï¼‰&lt;/p>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨åŸºäºè¯­å¥çš„æ ¼å¼ï¼Œåœ¨æœ‰éœ€è¦æ—¶åˆ‡æ¢åˆ°åŸºäºè¡Œçš„æ ¼å¼ã€‚&lt;strong>åœ¨å†™å…¥äº‹ä»¶æ—¶ï¼Œä¼šæœ‰å¾ˆå¤šçš„åˆ¤æ–­æ¡ä»¶&lt;/strong>ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="-å¤åˆ¶æ¨¡å¼">ğŸšï¸ å¤åˆ¶æ¨¡å¼&lt;/h2>
&lt;h3 id="-å¼‚æ­¥æ¨¡å¼é»˜è®¤">ğŸŒ‘ å¼‚æ­¥æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰&lt;/h3>
&lt;p>ä¸»åº“ä¸ä¼šä¸»åŠ¨æ¨é€ binlog ç»™ä»åº“ï¼Œäº‹åŠ¡æ‰§è¡Œå®Œç›´æ¥è¿”å›ï¼Œä¸å…³å¿ƒä»åº“æ˜¯å¦æ¥æ”¶åˆ°æ•°æ®ï¼Œä»åº“é€šè¿‡å¼‚æ­¥çš„æ–¹å¼è¿›è¡Œä¸»ä»å¤åˆ¶ã€‚&lt;/p>
&lt;h3 id="-åŠåŒæ­¥æ¨¡å¼">ğŸŒ“ åŠåŒæ­¥æ¨¡å¼&lt;/h3>
&lt;p>ä¸»åº“æ‰§è¡Œçš„äº‹åŠ¡ï¼Œç­‰åˆ°è‡³å°‘ä¸€ä¸ªä»åº“å°†æ—¥å¿—è®°å½•åˆ°äº† relay log ä¸­ä¹‹åï¼Œå†æäº¤ï¼ˆä¸èƒ½ä¿è¯ä»åº“æ‰§è¡Œå®Œæˆï¼Œåªèƒ½ä¿è¯ä¸€ä¸ªä»åº“æ”¶åˆ°äº†æ—¥å¿—ï¼‰ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šå¦‚æœä»åº“åœ¨è¶…æ—¶æ—¶é—´ä¹‹å†…æ²¡æœ‰è¿”å›ï¼Œä¼šé€€åŒ–æˆå¼‚æ­¥æ¨¡å¼ã€‚&lt;/p>
&lt;h3 id="-å…¨åŒæ­¥æ¨¡å¼">ğŸŒ• å…¨åŒæ­¥æ¨¡å¼&lt;/h3>
&lt;p>ä¸»åº“æ‰§è¡Œçš„äº‹åŠ¡ï¼Œç­‰åˆ°æ‰€æœ‰çš„ä»åº“éƒ½æ‰§è¡Œå®Œæˆä¹‹åï¼Œä¸»åº“æ‰ä¼šæäº¤ï¼Œè¿”å›æˆåŠŸä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒåŸºæœ¬ä¸ä¼šä½¿ç”¨ã€‚ä¼šä¸¥é‡å½±å“æ€§èƒ½ï¼Œåªè¦æœ‰ä¸€ä¸ªä»åº“å‘ç”Ÿæ•…éšœï¼Œå°±ä¼šå½±å“ä¸šåŠ¡æ­£å¸¸è¿›è¡Œã€‚&lt;/p>
&lt;h2 id="å‚è€ƒ">å‚è€ƒ&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://ost.51cto.com/posts/11721" target="_blank" rel="noopener"
>https://ost.51cto.com/posts/11721&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;amp;mid=2651961330&amp;amp;idx=1&amp;amp;sn=4bdbada3b26d4fc2fc505f7a0f2ad7c4" target="_blank" rel="noopener"
>https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651961330&amp;idx=1&amp;sn=4bdbada3b26d4fc2fc505f7a0f2ad7c4&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>MySQL è¯­å¥æ˜¯æ€ä¹ˆæ‰§è¡Œçš„</title><link>https://emerywan.github.io/blog/p/mysql/how-execute/</link><pubDate>Wed, 11 Jan 2023 18:30:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/how-execute/</guid><description>&lt;img src="https://emerywan.github.io/blog/p/mysql/how-execute/mysql.webp" alt="Featured image of post MySQL è¯­å¥æ˜¯æ€ä¹ˆæ‰§è¡Œçš„" />&lt;p>MySQL å¯ä»¥åˆ†ä¸ºï¼š&lt;/p>
&lt;p>ï¼ˆ1ï¼‰Server å±‚ï¼šè´Ÿè´£å»ºç«‹è¿æ¥ï¼Œåˆ†æå’Œæ‰§è¡ŒSQL&lt;/p>
&lt;p>ï¼ˆ2ï¼‰å­˜å‚¨å¼•æ“å±‚ï¼šè´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œæå–&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/how-execute/mysql.webp"
width="1920"
height="1440"
srcset="https://emerywan.github.io/blog/blog/p/mysql/how-execute/mysql_hu2e25f96503f96a8e12f0e1c93e28468a_180676_480x0_resize_q75_h2_box_2.webp 480w, https://emerywan.github.io/blog/blog/p/mysql/how-execute/mysql_hu2e25f96503f96a8e12f0e1c93e28468a_180676_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;h2 id="-server-å±‚">ğŸ›ï¸ Server å±‚&lt;/h2>
&lt;p>Server å±‚è´Ÿè´£å»ºç«‹è¿æ¥ï¼Œåˆ†æå’Œæ‰§è¡Œ SQLã€‚ä¸»è¦åŒ…æ‹¬ï¼šè¿æ¥å™¨ã€æŸ¥è¯¢ç¼“å­˜ã€åˆ†æå™¨ã€ä¼˜åŒ–å™¨å’Œæ‰§è¡Œå™¨ç­‰ï¼ŒåŒ…å« MySQL å¤§å¤šæ•°æ ¸å¿ƒæœåŠ¡çš„å…¬å…±åŠŸèƒ½ã€‚&lt;/p>
&lt;h3 id="-è¿æ¥å™¨">ğŸ’ è¿æ¥å™¨&lt;/h3>
&lt;p>å½“æˆ‘ä»¬ä½¿ç”¨ MySQL æœåŠ¡è¿æ¥åˆ°æ•°æ®åº“æ—¶ï¼Œé¦–å…ˆå°±æ˜¯é€šè¿‡è¿æ¥å™¨ã€‚&lt;/p>
&lt;p>è¿æ¥å™¨è´Ÿè´£ä¸å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ã€è·å–æƒé™ã€ç»´æŒå’Œç®¡ç†è¿æ¥ã€‚&lt;/p>
&lt;p>é€šå¸¸ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿æ¥æ•°æ®åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mysql -h&lt;span class="nv">$ip&lt;/span> -P&lt;span class="nv">$port&lt;/span> -u&lt;span class="nv">$user&lt;/span> -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-æŸ¥è¯¢ç¼“å­˜">ğŸ¥ æŸ¥è¯¢ç¼“å­˜&lt;/h3>
&lt;p>ğŸ™…â€â™‚ï¸ MySQL 8.0 å·²ç»ç§»é™¤äº†æŸ¥è¯¢ç¼“å­˜ã€‚æŸ¥è¯¢ç¼“å­˜çš„å‘½ä¸­ç‡éå¸¸ä½ï¼Œé™¤ééƒ½æ˜¯é™æ€è¡¨ä¸ä¼šæ›´æ–°ï¼Œåªè¦æœ‰ä¸€ä¸ªè¡¨æ›´æ–°äº†æ•°æ®ï¼Œè¿™ä¸ªè¡¨çš„æŸ¥è¯¢ç¼“å­˜å°±ä¼šè¢«æ¸…ç©ºï¼Œæœ‰æ—¶åè€Œä¼šå½±å“æ•°æ®åº“çš„æ•ˆç‡ã€‚&lt;/p>
&lt;p>å®¢æˆ·ç«¯å‘ MySQL å‘é€ SQL è¯­å¥åï¼Œå¦‚æœæ˜¯ &lt;code>select&lt;/code> è¯­å¥ï¼Œä¼šå…ˆå»æŸ¥è¯¢ç¼“å­˜ä¸­æŸ¥æ‰¾è¿™æ¡è¯­å¥æ˜¯å¦è¢«ç¼“å­˜ï¼ˆkey-valueï¼‰ã€‚å¦‚æœå‘½ä¸­ï¼Œä¼šç›´æ¥è¿”å› value ç»™å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;h3 id="-åˆ†æå™¨">ğŸ åˆ†æå™¨&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>è¯æ³•åˆ†æ&lt;/p>
&lt;p>MySQL ä¼šæ ¹æ®è¾“å…¥çš„å­—ç¬¦ä¸²è¯†åˆ«å‡ºå…³é”®å­—ï¼Œå¦‚ SQL ç±»å‹ã€è¡¨åã€å­—æ®µåã€where æ¡ä»¶ç­‰ï¼Œæ„å»ºå‡º SQL è¯­æ³•æ ‘ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¯­æ³•åˆ†æ&lt;/p>
&lt;p>æ ¹æ®è¯æ³•åˆ†æçš„ç»“æœï¼Œè¯­æ³•è§£æå™¨ä¼šæ ¹æ®è¯­æ³•è§„åˆ™ï¼Œåˆ¤æ–­è¯¥ SQL è¯­å¥æ˜¯å¦æ»¡è¶³ SQL è¯­æ³•ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="-ä¼˜åŒ–å™¨">ğŸ‘ ä¼˜åŒ–å™¨&lt;/h3>
&lt;p>ä¼˜åŒ–å™¨ä¸»è¦è´Ÿè´£å°† SQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œæ–¹æ¡ˆç¡®å®šä¸‹æ¥ã€‚&lt;/p>
&lt;p>æ¯”å¦‚åœ¨è¡¨ä¸­æœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œä¼˜åŒ–å™¨ä¼šåŸºäºæŸ¥è¯¢æˆæœ¬çš„è€ƒè™‘ï¼Œé€‰æ‹©ä½¿ç”¨å“ªä¸ªç´¢å¼•ã€‚&lt;/p>
&lt;p>æ¯”å¦‚åˆ¤æ–­èµ°ç´¢å¼•æŸ¥è¯¢å›è¡¨å’Œå…¨è¡¨æ‰«æçš„ä»£ä»·ï¼Œé€‰æ‹©è¿›è¡Œå›è¡¨æˆ–å…¨è¡¨æ‰«æã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code>explain&lt;/code> æŸ¥çœ‹ä¸€ä¸ªæ¡æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-æ‰§è¡Œå™¨">ğŸ“ æ‰§è¡Œå™¨&lt;/h3>
&lt;p>é€šè¿‡ä¼˜åŒ–å™¨ç¡®å®šæ‰§è¡Œæ–¹æ¡ˆåï¼ŒMySQL å¼€å§‹çœŸæ­£æ‰§è¡Œè¯­å¥äº†ã€‚&lt;/p>
&lt;p>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰§è¡Œå™¨ä¼šä¸å­˜å‚¨å¼•æ“è¿›è¡Œäº¤äº’ï¼Œäº¤äº’ä»¥è®°å½•ï¼ˆè¡Œï¼‰ä¸ºå•ä½ã€‚&lt;/p>
&lt;p>å¯¹äºè¦è¿›è¡Œå…¨è¡¨æ‰«æçš„æƒ…å†µï¼Œæ‰§è¡Œå™¨ä¼šè°ƒç”¨ InnoDB å¼•æ“æ¥å£çš„è·å–è¡¨çš„ç¬¬ä¸€è¡Œï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯å¦ç¬¦åˆï¼Œç¬¦åˆå°±åŠ å…¥åˆ°ç»“æœé›†ä¸­ã€‚ä¹‹åä¸æ–­è°ƒç”¨å¼•æ“æ¥å£é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°è¯»å–å®Œè¡¨çš„æœ€åä¸€è¡Œã€‚&lt;/p>
&lt;p>å¯¹äºè¦ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µï¼Œé€»è¾‘åŒæ ·ç±»ä¼¼ï¼Œä¼šé€šè¿‡ç´¢å¼•è·å–æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€è¡Œï¼Œæ ¹æ®æƒ…å†µæ˜¯å¦è¦å›è¡¨ã€è¦†ç›–ç´¢å¼•æˆ–ç´¢å¼•ä¸‹æ¨ï¼Œå†ä¸æ–­å‘åå¾ªç¯è·å–ï¼Œç›´åˆ°ä¸æ»¡è¶³æ¡ä»¶ã€‚&lt;/p>
&lt;h2 id="-å­˜å‚¨å¼•æ“">ğŸ’½ å­˜å‚¨å¼•æ“&lt;/h2>
&lt;p>å­˜å‚¨å¼•æ“è´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œæå–ã€‚&lt;/p>
&lt;p>MySQL å­˜å‚¨å¼•æ“çš„æ¶æ„æ¨¡å¼æ˜¯æ’ä»¶å¼çš„ï¼Œæ”¯æŒ InnoDBã€MyISAMã€Memory ç­‰å¤šä¸ªå­˜å‚¨å¼•æ“ã€‚å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚é€šå¸¸æˆ‘ä»¬ä¼šé€‰æ‹©ä½¿ç”¨ InnoDB å­˜å‚¨å¼•æ“ã€‚&lt;/p>
&lt;p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œå¦‚æœæŸ¥è¯¢çš„æ•°æ®åœ¨ &lt;a class="link" href="https://www.letout.cn/p/mysql/innodb/buffer-pool/" target="_blank" rel="noopener"
>BufferPool&lt;/a> ä¸­ï¼Œä¼šç›´æ¥è¿”å›ï¼›å¦‚æœæ²¡æœ‰ä¼šå°†æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåœ¨è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p></description></item><item><title>SQL è¯­å¥ä¼˜åŒ–</title><link>https://emerywan.github.io/blog/p/mysql/sql-optimize/</link><pubDate>Fri, 01 Jul 2022 18:02:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/sql-optimize/</guid><description>&lt;img src="https://emerywan.github.io/blog/imgs/20.jpeg" alt="Featured image of post SQL è¯­å¥ä¼˜åŒ–" />&lt;blockquote>
&lt;p>ğŸ”¥ ä¸»è¦æ€è·¯ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ğŸš€ å¢åŠ æ•°æ®æ—¶ï¼Œå°½é‡é¡ºåºæ’å…¥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸš€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå°½é‡èµ°ç´¢å¼•æ“ä½œ&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="-ä¸»é”®ä¼˜åŒ–">ğŸˆâ€â¬› ä¸»é”®ä¼˜åŒ–&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>â­ æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é™ä½ä¸»é”®çš„é•¿åº¦ï¼Œå‡å°‘ç£ç›˜ IO&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â­ æ’å…¥æ•°æ®å°½é‡é€‰æ‹©é¡ºåºæ’å…¥ï¼Œé€‰æ‹©ä½¿ç”¨ auto_increment è‡ªå¢ä¸»é”®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â­ å°½é‡ä¸è¦ä½¿ç”¨ UUID æˆ–å…¶ä»–è‡ªç„¶ä¸»é”®ï¼ˆå¦‚èº«ä»½è¯å·ï¼‰ ä½œä¸ºä¸»é”®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â­ ä¸šåŠ¡æ“ä½œé¿å…å¯¹ä¸»é”®çš„ä¿®æ”¹&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„ã€‚è¿™ç§å­˜å‚¨æ–¹å¼ä¸ºç´¢å¼•ç»„ç»‡è¡¨ï¼ˆindex organized table IOTï¼‰ã€‚&lt;/p>
&lt;p>æ•°æ®è¡Œæ˜¯è®°å½•åœ¨é€»è¾‘ç»“æ„ page é¡µä¸­çš„ï¼Œè€Œæ¯ä¸€ä¸ªé¡µçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œé»˜è®¤ 16Kã€‚ä¹Ÿå°±æ„å‘³ç€ï¼Œä¸€ä¸ªé¡µä¸­æ‰€å­˜å‚¨çš„è¡Œä¹Ÿæ˜¯æœ‰é™çš„ï¼Œå¦‚æœæ’å…¥çš„æ•°æ®è¡Œåœ¨è¯¥é¡µå­˜å‚¨ä¸ä¸‹ï¼Œå°†ä¼šå­˜å‚¨åˆ°ä¸‹ä¸€ä¸ªé¡µä¸­ï¼Œé¡µä¸é¡µä¹‹é—´ä¼šé€šè¿‡æŒ‡é’ˆè¿æ¥ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="-insert-ä¼˜åŒ–">ğŸ¦® insert ä¼˜åŒ–&lt;/h2>
&lt;p>ä¸€æ¬¡æ€§å¾€æ•°æ®åº“ä¸­æ’å…¥å¤šæ¡æ•°æ®ï¼Œå¯ä»ä»¥ä¸‹ä¸‰æ–¹é¢ä¼˜åŒ–ï¼š&lt;/p>
&lt;ul>
&lt;li>æ‰¹é‡æ’å…¥æ•°æ®&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">insert&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tb_test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">values&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Tom&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Cat&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Jerry&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">start&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">transaction&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">insert&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tb_test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">values&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Tom&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Cat&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Jerry&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">insert&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tb_test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">values&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Tom&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Cat&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Jerry&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">insert&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tb_test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">values&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Tom&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Cat&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Jerry&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">commit&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ä¸»é”®é¡ºåºæ’å…¥&lt;/li>
&lt;/ul>
&lt;p>æ•°æ®åœ¨ B+ æ ‘çš„å¶å­èŠ‚ç‚¹æœ‰åºå­˜æ”¾ï¼Œé¡ºåºæ’å…¥ä¿éšœæ¯æ¬¡æ’å…¥éƒ½æ˜¯åœ¨åé¢æ·»åŠ ä¸€æ¡è®°å½•ï¼ˆé¡ºåºç£ç›˜ IOï¼‰ï¼Œä¸éœ€è¦è°ƒæ•´å¶å­èŠ‚ç‚¹ä¸­çš„å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ğŸ™…â€â™‚ï¸ ä¸»é”®ä¹±åºæ’å…¥ : 8 1 9 21 88 2 4 15 89 5 7 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ğŸ™‹â€ ä¸»é”®é¡ºåºæ’å…¥ : 1 2 3 4 5 7 8 9 15 21 88 89
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="-update-ä¼˜åŒ–">ğŸ¦› update ä¼˜åŒ–&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>ğŸ«§ é˜²æ­¢ç´¢å¼•å¤±æ•ˆ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ«§ é˜²æ­¢å‡çº§ä¸ºè¡¨é”&lt;/p>
&lt;p>InnoDBçš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œå¹¶ä¸”è¯¥ç´¢å¼•ä¸èƒ½å¤±æ•ˆï¼Œå¦åˆ™ä¼šä»è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚&lt;/p>
&lt;p>å¼€å¯å¤šä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œ SQL æ—¶ï¼Œé˜²æ­¢è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="-order-by-ä¼˜åŒ–">ğŸ¦’ order by ä¼˜åŒ–&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>
&lt;p>ğŸ€ æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ€ å¤šå­—æ®µæ’åºæ—¶ï¼Œå°½é‡éµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ€ å°½é‡ä½¿ç”¨ç´¢å¼• / è¦†ç›–ç´¢å¼• &lt;!-- raw HTML omitted -->&lt;/p>
&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="-limit-ä¼˜åŒ–">ğŸ limit ä¼˜åŒ–&lt;/h2>
&lt;p>åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œå¦‚æœè¿›è¡Œ limit åˆ†é¡µæŸ¥è¯¢ï¼Œåœ¨æŸ¥è¯¢æ—¶ï¼Œè¶Šå¾€åï¼Œåˆ†é¡µæŸ¥è¯¢æ•ˆç‡è¶Šä½ã€‚&lt;/p>
&lt;p>å½“åœ¨è¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œå¦‚æœæ‰§è¡Œ &lt;code>limit 2000000,10&lt;/code> ï¼Œæ­¤æ—¶ MySQL ä¼šæ’åºå‰ 2000010 æ¡çš„è®°å½•ï¼Œ
ä»…ä»…è¿”å› 2000000 - 2000010 çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¼šè¢«ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚&lt;/p>
&lt;p>ä¼˜åŒ–æ€è·¯:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ğŸˆ åœ¨ä¸šä½™å…è®¸çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é™åˆ¶é¡µæ•°ã€‚é€šå¸¸ç”¨æˆ·ä¹Ÿä¸ä¼šå‘åé¢ç¿»å¾ˆå¤šé¡µã€‚&lt;/p>
&lt;p>ä¾‹å¦‚åœ¨æ·˜å®åŒåä¸€æ—¶ä¸èƒ½æŸ¥è¯¢å†å²è´­ç‰©è®°å½•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸˆ å¯ä»¥é€šè¿‡å…ˆå®šä½æ•°æ®ï¼Œå…ˆåç§»ï¼Œå† limit&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2000000&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ğŸˆ é€šè¿‡è¦†ç›–ç´¢å¼• + å­æŸ¥è¯¢å½¢å¼è¿›è¡Œä¼˜åŒ–&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2000000&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- or
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tb_sku&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2000000&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;/li>
&lt;/ul>
&lt;h2 id="-count-ä¼˜åŒ–">ğŸ¦¬ count ä¼˜åŒ–&lt;/h2>
&lt;p>&lt;code>count(*) == count(æ•°å­—) &amp;gt; count(ä¸»é”®) &amp;gt; count(å­—æ®µ)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>â­ count(ä¸»é”®)&lt;/p>
&lt;ul>
&lt;li>InnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯ä¸€è¡Œçš„ ä¸»é”®id å€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ã€‚æœåŠ¡å±‚æ‹¿åˆ°ä¸»é”®åï¼ŒæŒ‰è¡Œè¿›è¡Œç´¯åŠ ï¼ˆä¸»é”®ä¸å¯èƒ½ä¸ºnullï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>â­ count(å­—æ®µ)ï¼ˆæ³¨æ„ null çº¦æŸï¼‰&lt;/p>
&lt;ul>
&lt;li>æ²¡æœ‰ not null çº¦æŸ: InnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚åˆ¤æ–­æ˜¯å¦ä¸º nullï¼Œä¸ä¸º nullï¼Œå°±è®¡æ•°ç´¯åŠ ã€‚&lt;/li>
&lt;li>æœ‰ not null çº¦æŸï¼šInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>â­ count(æ•°å­—)&lt;/p>
&lt;ul>
&lt;li>InnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚æœåŠ¡å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­— â€œ1â€ è¿›å»ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>â­ count(*)&lt;/p>
&lt;ul>
&lt;li>InnoDBå¼•æ“å¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ï¼ŒæœåŠ¡å±‚ç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>InnoDB å­˜å‚¨å¼•æ“</title><link>https://emerywan.github.io/blog/p/mysql/innodb/</link><pubDate>Fri, 01 Jul 2022 13:01:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/innodb/</guid><description>&lt;img src="https://emerywan.github.io/blog/p/mysql/innodb/innodb.webp" alt="Featured image of post InnoDB å­˜å‚¨å¼•æ“" />&lt;h2 id="äº‹åŠ¡">äº‹åŠ¡&lt;/h2>
&lt;p>äº‹åŠ¡æ˜¯ä¸€ç»„é€»è¾‘ä¸Šçš„æ•°æ®åº“æ“ä½œï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>A&lt;/code> åŸå­æ€§ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>C&lt;/code> ä¸€è‡´æ€§ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰çš„æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>I&lt;/code> éš”ç¦»æ€§ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>D&lt;/code> æŒä¹…æ€§ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/1.png"
width="869"
height="333"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/1_hu3fd49fc1a58d123f3498503f7ff7204f_68265_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/1_hu3fd49fc1a58d123f3498503f7ff7204f_68265_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="1"
class="gallery-image"
data-flex-grow="260"
data-flex-basis="626px"
>&lt;/p>
&lt;p>C(ä¸€è‡´æ€§)æ˜¯ç›®çš„ï¼ŒA(åŸå­æ€§)ã€I(éš”ç¦»æ€§)ã€D(æŒä¹…æ€§)æ˜¯æ˜¯ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œæ•°æ®åº“æä¾›çš„æ‰‹æ®µã€‚&lt;/p>
&lt;h2 id="-redo-log">ğŸ”ƒ redo log&lt;/h2>
&lt;p>é‡åšæ—¥å¿—ï¼Œè®°å½•çš„æ˜¯â€œæŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹â€ã€‚ï¼ˆç‰©ç†æ—¥å¿—ï¼‰&lt;/p>
&lt;p>redo log ç”¨æ¥ä¿éšœæ•°æ®åº“çš„æŒä¹…æ€§ã€‚åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œæ‰§è¡Œå¢åˆ æ”¹çš„æ“ä½œæ—¶ï¼ŒInnoDB å¼•æ“ä¼šå…ˆæ“ä½œç¼“å†²æ±  Buffer Pool ä¸­çš„æ•°æ®ï¼Œå¦‚æœç¼“å†²åŒºæ²¡æœ‰å¯¹åº”çš„æ•°æ®ï¼Œä¼šé€šè¿‡åå°çº¿ç¨‹å°†ç£ç›˜ä¸­çš„æ•°æ®åŠ è½½å‡ºæ¥ï¼Œå­˜æ”¾åœ¨ç¼“å†²åŒºä¸­ï¼Œå†å°†ç¼“å†²æ± ä¸­çš„æ•°æ®ä¿®æ”¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/redolog.png"
width="889"
height="359"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/redolog_huec6805565d40a88bf7c70b51e3ee84c7_38212_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/redolog_huec6805565d40a88bf7c70b51e3ee84c7_38212_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="redolog"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="594px"
>&lt;/p>
&lt;p>ä¿®æ”¹åçš„æ•°æ®é¡µæˆ‘ä»¬ç§°ä¸ºè„é¡µï¼Œç¼“å†²åŒºçš„è„é¡µæ•°æ®å¹¶ä¸æ˜¯å®æ—¶åˆ·æ–°çš„ï¼Œè€Œæ˜¯ä¸€æ®µæ—¶é—´ä¹‹åå°†ç¼“å†²åŒºçš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼ˆéšæœºç£ç›˜ IOï¼‰ï¼Œä»è€Œä¿è¯ç¼“å†²åŒºä¸ç£ç›˜çš„æ•°æ®ä¸€è‡´ã€‚&lt;/p>
&lt;p>å¯¹ç¼“å†²åŒºçš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹ï¼Œä¼šé¦–å…ˆå°†æ“ä½œçš„æ•°æ®é¡µçš„å˜åŒ–ï¼Œè®°å½•åœ¨ redo log buffer ä¸­ã€‚åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œå°† redo log buffer ä¸­çš„æ•°æ®åˆ·æ–°åˆ° redo log ç£ç›˜æ–‡ä»¶ä¸­ï¼ˆé¡ºåºç£ç›˜ IOï¼‰ã€‚&lt;/p>
&lt;p>å¦‚æœåˆ·æ–°ç¼“å†²åŒºçš„è„é¡µåˆ°ç£ç›˜æ—¶å‘ç”Ÿé”™è¯¯ï¼Œæˆ–è€…å‘ç”Ÿäº†å¼‚å¸¸æ–­ç”µï¼Œå°±å¯ä»¥å€ŸåŠ©äº redo log è¿›è¡Œæ•°æ®æ¢å¤ï¼Œè¿™æ ·å°±ä¿è¯äº†äº‹åŠ¡çš„æŒä¹…æ€§ã€‚&lt;/p>
&lt;h2 id="-undo-log">ğŸ”™ undo log&lt;/h2>
&lt;p>å›æ»šæ—¥å¿—ã€‚è®°å½•æ“ä½œæ•°æ®åº“çš„é€†æ“ä½œï¼Œç”¨äºè¿›è¡Œå›æ»šã€‚&lt;/p>
&lt;p>ä½œç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>æä¾›å›æ»šæ“ä½œï¼ˆä¿éšœäº‹åŠ¡çš„åŸå­æ€§ï¼‰&lt;/li>
&lt;li>å®ç° MVCC æ“ä½œï¼Œæå‡æ•°æ®åº“æ€§èƒ½&lt;/li>
&lt;/ul>
&lt;p>undo log æ˜¯é€»è¾‘æ—¥å¿—ï¼Œåœ¨ InnoDB å­˜å‚¨å¼•æ“å¯¹è®°å½•è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šæŠŠå›æ»šéœ€è¦çš„ä¿¡æ¯å…¨éƒ¨è®°å½•åˆ° undo ä¸­ï¼Œå¦‚æœå‘ç”Ÿå›æ»šï¼Œå°±ä¼šè¯»å– undo logï¼Œç„¶åæ‰§è¡Œä¸ä¹‹ç›¸åçš„æ“ä½œã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>â• æ’å…¥æ•°æ®ï¼Œè®°å½•è¿™æ¡æ•°æ®çš„ä¸»é”®ï¼Œå›æ»šæ—¶æ ¹æ®ä¸»é”®æŠŠè¯¥æ¡è®°å½•åˆ é™¤&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â– åˆ é™¤æ•°æ®ï¼Œè®°å½•è¿™æ¡æ•°æ®çš„æ‰€æœ‰å†…å®¹ï¼Œå›æ»šæ—¶å°†è¿™äº›å†…å®¹ç»„æˆçš„è®°å½•æ’å…¥è¡¨ä¸­&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ–‹ï¸ æ›´æ–°æ•°æ®ï¼Œ&lt;/p>
&lt;ul>
&lt;li>æ›´æ–°äº†ä¸»é”®ï¼Œä¼šè®°å½•ä¸¤æ¡ undo logï¼Œä¸€æ¡åˆ é™¤çš„ï¼Œä¸€æ¡æ›´æ–°çš„&lt;/li>
&lt;li>æ²¡æœ‰æ›´æ–°ä¸»é”®ï¼Œè®°å½•è¿™æ¡æ•°æ®æ›´æ–°åˆ—çš„æ—§å€¼ï¼Œå›æ»šæ—¶å°†æ•°æ®æ›´æ–°ä¸ºæ—§å€¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="-mvcc">ğŸ“” MVCC&lt;/h2>
&lt;p>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ŒåŒä¸€æ¡è®°å½•åœ¨æ•°æ®åº“ä¸­ï¼Œå¯ä»¥å­˜åœ¨å¤šä¸ªç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>ä¾èµ–äºï¼š&lt;/p>
&lt;ul>
&lt;li>è¡Œçš„éšå¼å­—æ®µ
&lt;ul>
&lt;li>DB_TRX_ID äº‹åŠ¡ id&lt;/li>
&lt;li>DB_ROLL_PTR å›æ»šæŒ‡é’ˆï¼ˆè®°å½•è¿™æ¡è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>undo log&lt;/li>
&lt;li>Read View&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/2.png"
width="447"
height="293"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/2_hu6914e1ba0252a0a630b3ee48cb8867a4_30147_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/2_hu6914e1ba0252a0a630b3ee48cb8867a4_30147_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="2"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="366px"
>&lt;/p>
&lt;h3 id="å½“å‰è¯»">å½“å‰è¯»&lt;/h3>
&lt;p>è¯»å–çš„æ˜¯è®°å½•çš„æœ€æ–°ç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>&lt;code>update&lt;/code> &lt;code>insert&lt;/code> &lt;code>delete&lt;/code> &lt;code>select ... for update&lt;/code> &lt;code>select ... lock in share mode&lt;/code> éƒ½æ˜¯è¿›è¡Œå½“å‰è¯»ã€‚&lt;/p>
&lt;h3 id="å¿«ç…§è¯»">å¿«ç…§è¯»&lt;/h3>
&lt;p>ç®€å•çš„ä¸åŠ é” &lt;code>select&lt;/code> å°±æ˜¯å¿«ç…§è¯»ã€‚è¯»å–çš„æ˜¯å¿«ç…§ç‰ˆæœ¬ï¼Œé€šè¿‡ MVCC è¿›è¡Œå¹¶å‘æ§åˆ¶ã€‚&lt;/p>
&lt;h2 id="-å…³é”®ç‰¹æ€§">ğŸš€ å…³é”®ç‰¹æ€§&lt;/h2>
&lt;p>InnoDB å­˜å‚¨å¼•æ“çš„ç‰¹æ€§ï¼Œå¯ä»¥å¸¦æ¥æ›´é«˜çš„æ€§èƒ½å’Œå¯é æ€§ã€‚&lt;/p>
&lt;h3 id="-æ’å…¥ç¼“å†²-insert-buffer">ğŸ§® æ’å…¥ç¼“å†² Insert Buffer&lt;/h3>
&lt;p>å½“æ’å…¥ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œåœ¨èšç°‡ç´¢å¼•ä¸­ï¼Œé€šå¸¸æ•°æ®éƒ½æ˜¯åœ¨å¶å­èŠ‚ç‚¹é¡ºåºå­˜æ”¾çš„ï¼Œåªéœ€è¦å°†æ’å…¥çš„æ•°æ®æ”¾åˆ°æœ€åå³å¯ï¼ˆä¸»é”®é¡ºåºå­˜æ”¾ï¼‰ã€‚&lt;/p>
&lt;p>é€šå¸¸æˆ‘ä»¬éƒ½ä¼šåœ¨ä¸€å¼ è¡¨ä¸Šåˆ›å»ºä¸€äº›äºŒçº§ç´¢å¼•ï¼Œè€Œè¿™äº›äºŒçº§ç´¢å¼•åœ¨æ•°æ®æ’å…¥æ—¶ï¼Œéœ€è¦ç»´æŠ¤ç´¢å¼•æ˜¯ç¦»æ•£çš„ï¼Œç”±äºéšæœº IO å°±ä¼šå¯¼è‡´æ’å…¥æ€§èƒ½çš„ä¸‹é™ã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒInnoDB è®¾è®¡äº† &lt;code>Insert Buffer&lt;/code>ã€‚&lt;/p>
&lt;p>äºŒçº§ç´¢å¼•çš„æ›´æ–°æ“ä½œï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœéœ€è¦æ›´æ–°çš„ç´¢å¼•é¡µåœ¨ Buffer Pool ä¸­ï¼Œåˆ™ç›´æ¥æ’å…¥ï¼›&lt;/li>
&lt;li>å¦‚æœä¸åœ¨ï¼Œåˆ™æ’å…¥ Insert Bufferï¼Œä¹‹åä»¥ä¸€å®šçš„é¢‘ç‡å’Œæƒ…å†µåœ¨ä¸äºŒçº§ç´¢å¼•åˆå¹¶&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ Insert Buffer éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š&lt;/p>
&lt;ul>
&lt;li>â­ äºŒçº§ç´¢å¼•&lt;/li>
&lt;li>â­ éå”¯ä¸€ç´¢å¼•&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœäºŒçº§ç´¢å¼•æ˜¯å”¯ä¸€çš„ï¼Œåœ¨æ’å…¥æ—¶ï¼Œè¿˜éœ€è¦å»ç´¢å¼•é¡µæŸ¥æ‰¾æ”¹ç´¢å¼•æ˜¯å¦å”¯ä¸€ï¼Œè¿™æ ·çš„ç¦»æ•£è¯»å–ä¸¤éƒ¨åˆ†ï¼Œä¼šå¯¼è‡´ Insert Buffer å¤±å»æ„ä¹‰ã€‚&lt;/p>
&lt;p>åç»­çš„ç‰ˆæœ¬æä¾›äº†å‡çº§ç‰ˆæœ¬ &lt;code>Change Buffer&lt;/code>ï¼Œå¯¹ Insertã€Deleteã€Update éƒ½è¿›è¡Œç¼“å†²ã€‚&lt;/p>
&lt;h3 id="-ä¸¤æ¬¡å†™-double-write">ğŸ–‹ï¸ ä¸¤æ¬¡å†™ Double Write&lt;/h3>
&lt;p>InnoDB å°†è„é¡µåˆ·æ–°åˆ°ç£ç›˜ä¸­æ—¶ï¼Œçªç„¶å‘ç”Ÿå®•æœºï¼Œåªå†™å…¥äº†ä¸€åŠï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>InnDB ä½¿ç”¨ Double Wirte æœºåˆ¶ï¼Œç»™æ•°æ®æ·»åŠ å‰¯æœ¬ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/innodb/doublewrite.png"
width="1178"
height="730"
srcset="https://emerywan.github.io/blog/blog/p/mysql/innodb/doublewrite_hu9ca5738e358d4e9e6de3d859e62edb84_153884_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/innodb/doublewrite_hu9ca5738e358d4e9e6de3d859e62edb84_153884_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="387px"
>&lt;/p>
&lt;p>éœ€è¦åˆ·æ–°çš„è„é¡µä¼šè¢«å¤åˆ¶åˆ° Double Write Buffer ä¸­ï¼Œåœ¨éœ€è¦åˆ·ç›˜æ—¶ï¼š&lt;/p>
&lt;ul>
&lt;li>å…ˆåˆ†ä¸¤æ¬¡å†™å…¥ä¸€ä»½åˆ°å…±äº«è¡¨ç©ºé—´çš„ double wirte ç‰©ç†ç£ç›˜ä¸Šï¼ˆé¡ºåºå†™å…¥ï¼‰&lt;/li>
&lt;li>å†å°†æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­ï¼ˆéšæœº IOï¼‰&lt;/li>
&lt;/ul>
&lt;h3 id="-è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•">ğŸ—‚ï¸ è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•&lt;/h3>
&lt;p>InnoDB å­˜å‚¨å¼•æ“ä¼šè‡ªåŠ¨æ ¹æ®è®¿é—®çš„é¢‘ç‡å’Œæ¨¡å¼ç»™çƒ­ç‚¹æ•°æ®å»ºç«‹ä¸€ä¸ª Hash ç´¢å¼•ï¼ŒåŠ å¿«è¯»è¯·æ±‚ã€‚&lt;/p>
&lt;p>åªèƒ½ä¸ºç­‰å€¼æŸ¥è¯¢å»ºç«‹ï¼ŒèŒƒå›´æŸ¥è¯¢ä¸èƒ½å»ºç«‹ã€‚&lt;/p>
&lt;h3 id="-é¢„è¯»æœºåˆ¶">ğŸ“– é¢„è¯»æœºåˆ¶&lt;/h3>
&lt;p>InnoDB ä¼šå°†æŸ¥è¯¢é¡µçš„é‚»è¿‘é¡µä¸€èµ·è¯»åˆ° &lt;a class="link" href="https://www.letout.cn/p/mysql/innodb/buffer-pool/" target="_blank" rel="noopener"
>Buffer Pool&lt;/a> ä¸­ã€‚&lt;/p>
&lt;p>é€šè¿‡æ”¹è¿›çš„ LRU é“¾è¡¨ï¼ˆç®¡ç†å¹²å‡€é¡µ &amp;amp; è„é¡µçš„é“¾è¡¨ï¼‰ï¼Œè§£å†³äº†é¢„è¯»å¤±æ•ˆçš„é—®é¢˜ã€‚ã€‚&lt;/p></description></item><item><title>MySQL ä¸­çš„æ—¥å¿—</title><link>https://emerywan.github.io/blog/p/mysql/log/</link><pubDate>Thu, 30 Jun 2022 18:02:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/log/</guid><description>&lt;img src="https://emerywan.github.io/blog/imgs/19.jpeg" alt="Featured image of post MySQL ä¸­çš„æ—¥å¿—" />&lt;h2 id="-server-å±‚æ—¥å¿—">ğŸ–¥ï¸ Server å±‚æ—¥å¿—&lt;/h2>
&lt;h3 id="é”™è¯¯æ—¥å¿—">é”™è¯¯æ—¥å¿—&lt;/h3>
&lt;p>é”™è¯¯æ—¥å¿—æ˜¯ MySQL ä¸­æœ€é‡è¦çš„æ—¥å¿—ä¹‹ä¸€ï¼Œå®ƒè®°å½•äº†å½“ mysqld å¯åŠ¨å’Œåœæ­¢æ—¶ï¼Œä»¥åŠæœåŠ¡å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿä»»ä½•ä¸¥é‡é”™è¯¯æ—¶çš„ç›¸å…³ä¿¡æ¯ã€‚&lt;/p>
&lt;p>å½“æ•°æ®åº“å‡ºç°ä»»ä½•æ•…éšœå¯¼è‡´æ— æ³•æ­£å¸¸ä½¿ç”¨æ—¶ï¼Œå»ºè®®é¦–å…ˆæŸ¥çœ‹æ­¤æ—¥å¿—ã€‚æŸ¥çœ‹æ—¥å¿—ä½ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">show&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">variables&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;%log_error%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/log/errorlog.png"
width="669"
height="214"
srcset="https://emerywan.github.io/blog/blog/p/mysql/log/errorlog_huaf2aa946fc0c9a4be25a1e7ae77fcd38_27013_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/log/errorlog_huaf2aa946fc0c9a4be25a1e7ae77fcd38_27013_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="errorlog"
class="gallery-image"
data-flex-grow="312"
data-flex-basis="750px"
>&lt;/p>
&lt;h3 id="æŸ¥è¯¢æ—¥å¿—">æŸ¥è¯¢æ—¥å¿—&lt;/h3>
&lt;p>æŸ¥è¯¢æ—¥å¿—ä¸­è®°å½•äº†å®¢æˆ·ç«¯çš„æ‰€æœ‰æ“ä½œè¯­å¥ã€‚ï¼ˆbinlog ä¸åŒ…å«æŸ¥è¯¢æ•°æ®çš„ SQL è¯­å¥ï¼‰&lt;/p>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢æ—¥å¿—æ˜¯æœªå¼€å¯çš„ã€‚&lt;/p>
&lt;p>å¦‚æœéœ€è¦å¼€å¯æŸ¥è¯¢æ—¥å¿—ï¼Œå¯ä»¥ä¿®æ”¹MySQLçš„é…ç½®æ–‡ä»¶ /etc/my.cnf æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-conf" data-lang="conf">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># è¯¥é€‰é¡¹ç”¨æ¥å¼€å¯æŸ¥è¯¢æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># å¯é€‰å€¼ 0 å…³é—­ 1 å¼€å¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">general_log&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># è®¾ç½®æ—¥å¿—çš„æ–‡ä»¶å
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤çš„æ–‡ä»¶åä¸º host_name.log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">general_log_file&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">mysql_query.log&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¼€å¯äº†æŸ¥è¯¢æ—¥å¿—ä¹‹åï¼Œ/var/lib/mysql/ ç›®å½•ä¸‹å°±ä¼šå‡ºç° mysql_query.log æ–‡ä»¶ã€‚&lt;/p>
&lt;p>æ‰€æœ‰çš„å®¢æˆ·ç«¯çš„å¢åˆ æ”¹æŸ¥æ“ä½œéƒ½ä¼šè®°å½•åœ¨è¯¥æ—¥å¿—æ–‡ä»¶ä¹‹ä¸­ï¼Œé•¿æ—¶é—´è¿è¡Œåï¼Œè¯¥æ—¥å¿—æ–‡ä»¶å°†ä¼šéå¸¸å¤§ã€‚&lt;/p>
&lt;h3 id="æ…¢æŸ¥è¯¢æ—¥å¿—">æ…¢æŸ¥è¯¢æ—¥å¿—&lt;/h3>
&lt;p>æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†ï¼š&lt;/p>
&lt;ul>
&lt;li>æ‰§è¡Œæ—¶é—´è¶…è¿‡ &lt;code>long_query_time&lt;/code>&lt;/li>
&lt;li>æ‰«æè®°å½•æ•°å¤§äº &lt;code>min_examined_row_limit&lt;/code>
çš„æ‰€æœ‰çš„SQLè¯­å¥çš„æ—¥å¿—ï¼Œé»˜è®¤æœªå¼€å¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœéœ€è¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œéœ€è¦åœ¨ MySQL çš„é…ç½®æ–‡ä»¶ /etc/my.cnf ä¸­é…ç½®å¦‚ä¸‹å‚æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-conf" data-lang="conf">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># æ…¢æŸ¥è¯¢æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">slow_query_log&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># æ‰§è¡Œæ—¶é—´å‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">long_query_time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ä¼šè®°å½•ç®¡ç†è¯­å¥ï¼Œä¹Ÿä¸ä¼šè®°å½•ä¸ä½¿ç”¨ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾çš„æŸ¥è¯¢ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-conf" data-lang="conf">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># è®°å½•æ‰§è¡Œè¾ƒæ…¢çš„ç®¡ç†è¯­å¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">log_slow_admin_statements&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># è®°å½•æ‰§è¡Œè¾ƒæ…¢çš„æœªä½¿ç”¨ç´¢å¼•çš„è¯­å¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">log_queries_not_using_indexes&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nv">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-bin-log">ğŸ”¢ bin log&lt;/h3>
&lt;p>äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbin logï¼‰æ˜¯è®°å½•äº†æ‰€æœ‰çš„æ•°æ®åº“è¡¨ç»“æ„å˜æ›´ï¼ˆDDLï¼‰å’Œè¡¨æ•°æ®ä¿®æ”¹ï¼ˆDMLï¼‰çš„æ—¥å¿—ã€‚&lt;/p>
&lt;p>ä½œç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>æ•°æ®å½’æ¡£&lt;/li>
&lt;li>ç¾éš¾æ—¶æ•°æ®æ¢å¤&lt;/li>
&lt;li>MySQL ä¸»ä»å¤åˆ¶&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">show&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">variables&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;%log_bin%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/log/binlog.png"
width="602"
height="240"
srcset="https://emerywan.github.io/blog/blog/p/mysql/log/binlog_hue4b3570af35eb515872cd8390aac573d_28397_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/log/binlog_hue4b3570af35eb515872cd8390aac573d_28397_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="binlog"
class="gallery-image"
data-flex-grow="250"
data-flex-basis="602px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>log_bin_basename&lt;/p>
&lt;ul>
&lt;li>å½“å‰æ•°æ®åº“æœåŠ¡å™¨çš„binlogæ—¥å¿—çš„åŸºç¡€åç§°(å‰ç¼€)ï¼Œå…·ä½“çš„binlogæ–‡ä»¶åéœ€è¦å†è¯¥basenameçš„åŸºç¡€ä¸ŠåŠ ä¸Šç¼–å·(ç¼–å·ä»000001å¼€å§‹)ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>log_bin_index&lt;/p>
&lt;ul>
&lt;li>binlogçš„ç´¢å¼•æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†å½“å‰æœåŠ¡å™¨å…³è”çš„binlogæ–‡ä»¶æœ‰å“ªäº›ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="binlog-æ ¼å¼">binlog æ ¼å¼&lt;/h4>
&lt;p>MySQL æœåŠ¡å™¨ä¸­æä¾›äº†å¤šç§æ ¼å¼æ¥è®°å½•äºŒè¿›åˆ¶æ—¥å¿—ï¼š&lt;/p>
&lt;p>é…ç½®äºŒè¿›åˆ¶æ—¥å¿—çš„æ ¼å¼ï¼Œåªéœ€è¦åœ¨ /etc/my.cnf ä¸­é…ç½® binlog_format å‚æ•°å³å¯ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ğŸ“ƒ &lt;code>statement&lt;/code>&lt;/p>
&lt;ul>
&lt;li>åŸºäº SQL è¯­å¥çš„æ—¥å¿—è®°å½•ï¼Œè®°å½•çš„æ˜¯ SQL è¯­å¥ï¼Œå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„ SQL éƒ½ä¼šè®°å½•åœ¨æ—¥å¿—æ–‡ä»¶ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ğŸ“• &lt;code>row&lt;/code> ï¼ˆé»˜è®¤ï¼‰&lt;/p>
&lt;ul>
&lt;li>åŸºäºè¡Œçš„æ—¥å¿—è®°å½•ï¼Œè®°å½•çš„æ˜¯æ¯ä¸€è¡Œçš„æ•°æ®å˜æ›´ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ğŸ–‡ï¸ &lt;code>mixed&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æ··åˆäº† statememt å’Œ row ä¸¤ç§æ ¼å¼ï¼Œé»˜è®¤é‡‡ç”¨statementï¼Œåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ä¼šè‡ªåŠ¨åˆ‡æ¢ä¸º row è¿›è¡Œè®°å½•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">show&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">variables&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;%binlog_format%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/log/binlogformat.png"
width="432"
height="156"
srcset="https://emerywan.github.io/blog/blog/p/mysql/log/binlogformat_hu025aaab383e907dcebf622698b084bf9_13882_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/log/binlogformat_hu025aaab383e907dcebf622698b084bf9_13882_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="binlogformat"
class="gallery-image"
data-flex-grow="276"
data-flex-basis="664px"
>&lt;/p>
&lt;h4 id="æŸ¥çœ‹-bin-log">æŸ¥çœ‹ bin log&lt;/h4>
&lt;p>æ—¥å¿—æ˜¯ä»¥äºŒè¿›åˆ¶æ–¹å¼å­˜å‚¨çš„ï¼Œä¸èƒ½ç›´æ¥è¯»å–ï¼Œéœ€è¦é€šè¿‡äºŒè¿›åˆ¶æ—¥å¿—æŸ¥è¯¢å·¥å…· &lt;code>mysqlbinlog&lt;/code> æ¥æŸ¥çœ‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mysqlbinlog [å‚æ•°] logfilename
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å‚æ•°é€‰é¡¹ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -d æŒ‡å®šæ•°æ®åº“åç§°ï¼Œåªåˆ—å‡ºæŒ‡å®šçš„æ•°æ®åº“ç›¸å…³æ“ä½œ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -o å¿½ç•¥æ‰æ—¥å¿—ä¸­çš„å‰ n è¡Œå‘½ä»¤
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v å°†è¡Œäº‹ä»¶(æ•°æ®å˜æ›´)é‡æ„ä¸ºSQLè¯­å¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -vv å°†è¡Œäº‹ä»¶(æ•°æ®å˜æ›´)é‡æ„ä¸ºSQLè¯­å¥ï¼Œå¹¶è¾“å‡ºæ³¨é‡Šä¿¡æ¯
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="æ¸…ç†-bin-log">æ¸…ç† bin log&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>&lt;code>reset master&lt;/code>&lt;/p>
&lt;ul>
&lt;li>åˆ é™¤å…¨éƒ¨ binlog æ—¥å¿—ï¼Œåˆ é™¤ä¹‹åï¼Œæ—¥å¿—ç¼–å·ï¼Œå°†ä» binlog.000001é‡æ–°å¼€å§‹&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>purge master logs to 'binlog.000005'&lt;/code>&lt;/p>
&lt;ul>
&lt;li>åˆ é™¤ 000005 ä¹‹å‰çš„æ‰€æœ‰æ—¥å¿—&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>purge master logs before 'yyyy-mm-dd hh24:mi:ss'&lt;/code>&lt;/p>
&lt;ul>
&lt;li>åˆ é™¤æ—¥å¿—ä¸º &amp;ldquo;yyyy-mm-dd hh24:mi:ss&amp;rdquo; ä¹‹å‰äº§ç”Ÿçš„æ‰€æœ‰æ—¥å¿—&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥åœ¨ mysql çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äºŒè¿›åˆ¶æ—¥å¿—çš„è¿‡æœŸæ—¶é—´ï¼Œè®¾ç½®äº†ä¹‹åï¼ŒäºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸä¼šè‡ªåŠ¨åˆ é™¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">show&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">variables&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;%binlog_expire_logs_seconds%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/log/binlogexpire.png"
width="541"
height="153"
srcset="https://emerywan.github.io/blog/blog/p/mysql/log/binlogexpire_hua71c1465b703f02a37880ff6dd450f1c_15632_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/log/binlogexpire_hua71c1465b703f02a37880ff6dd450f1c_15632_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="binlogexpire"
class="gallery-image"
data-flex-grow="353"
data-flex-basis="848px"
>&lt;/p>
&lt;h2 id="-inoodb-å­˜å‚¨å¼•æ“æ—¥å¿—">ğŸ’½ InooDB å­˜å‚¨å¼•æ“æ—¥å¿—&lt;/h2>
&lt;h3 id="-redo-log-é‡åšæ—¥å¿—">â±ï¸ redo log é‡åšæ—¥å¿—&lt;/h3>
&lt;p>MySQL æ›´æ–°æ•°æ®æ“ä½œçš„éƒ½æ˜¯ Buffer Pool å†…å­˜ä¸­çš„ç¼“å­˜é¡µï¼Œè¢«ä¿®æ”¹è¿‡çš„è„é¡µä¸ä¼šç«‹å³è¢«åˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼ˆéšæœºç£ç›˜ IO æ€§èƒ½ä½ï¼‰ï¼Œä¸ºäº†é˜²æ­¢æ–­ç”µç­‰æƒ…å†µé€ æˆå†…å­˜ä¸­çš„æ•°æ®ä¸¢å¤±ï¼Œåˆ©ç”¨ redo log è®°å½•æ•°æ®é¡µçš„æ›´æ–°æ“ä½œï¼Œåç»­åœ¨åˆé€‚çš„æ—¶é—´å†ä¿®æ”¹ç£ç›˜ä¸­çš„æ•°æ®ã€‚ï¼ˆWAL æŠ€æœ¯ï¼‰&lt;/p>
&lt;p>redo log æ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•äº†æ•°æ®é¡µåšäº†ä»€ä¹ˆä¿®æ”¹ã€‚ä¾‹å¦‚ï¼šå¯¹ XXX è¡¨ç©ºé—´ä¸­çš„ YYY æ•°æ®é¡µ ZZZ åç§»é‡çš„åœ°æ–¹åšäº† AAA æ›´æ–°ã€‚&lt;/p>
&lt;p>redo log è®°å½•äº†äº‹åŠ¡å®Œæˆåçš„æ•°æ®çŠ¶æ€ï¼Œå½“äº‹åŠ¡æäº¤æ—¶ï¼Œåªè¦å°† redo log æŒä¹…åŒ–åˆ°ç¡¬ç›˜å³å¯ï¼ˆé¡ºåºç£ç›˜ IOï¼‰ï¼Œä¸éœ€è¦å°† Buffer Pool ä¸­çš„è„é¡µæŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼ˆéšæœºç£ç›˜ IOï¼‰ã€‚&lt;/p>
&lt;p>ä¿è¯äº†äº‹åŠ¡ ACID ç‰¹æ€§ä¸­çš„æŒä¹…æ€§ï¼Œå½“æ•°æ®åº“å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥åˆ©ç”¨ redo log æ¢å¤æ•°æ®ã€‚&lt;/p>
&lt;h4 id="-redo-log-å¾ªç¯å†™">ğŸ”ƒ redo log å¾ªç¯å†™&lt;/h4>
&lt;p>redo log æ˜¯ä¸ºäº†é˜²æ­¢ Buffer Pool ä¸­çš„è„é¡µä¸¢å¤±è€Œè®¾è®¡çš„ã€‚å½“éšç€æœåŠ¡çš„è¿è¡Œï¼ŒBuffer Pool ä¸­çš„è„é¡µåˆ·æ–°åˆ°äº†ç£ç›˜ä¸­ï¼Œredo log ä¸­çš„è®°å½•å°±æ²¡æœ‰ç”¨äº†ï¼Œå¯ä»¥æ“¦é™¤æ—§è®°å½•ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ redo log é‡‡ç”¨äº†å¾ªç¯å†™çš„æ–¹å¼ï¼Œæ•°æ®å†™åˆ°æœ«å°¾åˆä¼šå›åˆ°æ–‡ä»¶çš„å¼€å¤´ï¼Œæ–°æ•°æ®å¯ä»¥è¦†ç›–æ— ç”¨çš„æ—§æ•°æ®ã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/log/redo-log.webp"
width="1362"
height="906"
srcset="https://emerywan.github.io/blog/blog/p/mysql/log/redo-log_hud436e5fcec2bf61353c634ad67370294_39572_480x0_resize_q75_h2_box_2.webp 480w, https://emerywan.github.io/blog/blog/p/mysql/log/redo-log_hud436e5fcec2bf61353c634ad67370294_39572_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;h4 id="åˆ·ç›˜">åˆ·ç›˜&lt;/h4>
&lt;p>äº§ç”Ÿçš„ redo log å¹¶ä¸æ˜¯ç›´æ¥å†™å…¥ç£ç›˜çš„ï¼Œä¼šå…ˆå†™åˆ° redo log buffer ä¸­ï¼Œåç»­å†æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚&lt;/p>
&lt;p>redo log buffer é»˜è®¤å¤§å°ä¸º &lt;code>innodb_log_Buffer_size = 16MB&lt;/code>ï¼Œå¢åŠ å®ƒçš„å¤§å°ï¼Œå¯ä»¥è®© MySQL å¤„ç†å¤§äº‹åŠ¡ä¸å¿…å†™å…¥åˆ°ç£ç›˜ï¼Œè¿›è€Œæå‡ IO æ€§èƒ½ã€‚&lt;/p>
&lt;p>redo log buffer åˆ·ç›˜æ—¶æœºï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>InnoDB çš„åå°çº¿ç¨‹ï¼Œæ¯éš” 1sï¼Œä¼šå°† redo log buffer æŒä¹…åŒ–åˆ°ç£ç›˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>redo log buffer ä¸­è®°å½•çš„å†™å…¥é‡å¤§äºè®¾ç½®ç©ºé—´çš„ä¸€åŠæ—¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>MySQL æ­£å¸¸å…³é—­æ—¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶ï¼Œå°† redo log buffer ä¸­ redo log æŒä¹…åŒ–åˆ°ç£ç›˜ &lt;code>innodb_flush_log_at_trx_commit&lt;/code> æ§åˆ¶&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="ä¸¤é˜¶æ®µæäº¤">ä¸¤é˜¶æ®µæäº¤&lt;/h4>
&lt;p>redo log å’Œ bin log æŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼Œæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„æ“ä½œï¼Œå¯èƒ½ä¼šå‡ºç°åŠæˆåŠŸçš„çŠ¶æ€ï¼Œå¯¼è‡´ä¸¤ä»½æ—¥å¿—ä¹‹é—´çš„é€»è¾‘ä¸ä¸€è‡´ã€‚&lt;/p>
&lt;p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä¿è¯ä¸¤ä¸ªæ—¥å¿—çš„ä¸€è‡´æ€§ï¼Œä½¿ç”¨äº†â€ä¸¤é˜¶æ®µæäº¤â€œæ¥è§£å†³ã€‚æŠŠå•ä¸ªäº‹åŠ¡çš„æäº¤æ‹†åˆ†æˆäº†ä¸¤ä¸ªé˜¶æ®µï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Prepare å‡†å¤‡é˜¶æ®µ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Commit æäº¤é˜¶æ®µ&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å°† redo log å†™å…¥æ‹†æˆäº†ä¸¤ä¸ªæ­¥éª¤ï¼šprepare å’Œ commitï¼Œä¸­é—´å†ç©¿æ’å†™å…¥ bin logã€‚&lt;/p>
&lt;p>&lt;code>redo log prepare -&amp;gt; bin log -&amp;gt; redo log commit&lt;/code>&lt;/p>
&lt;p>å½“ bin log æˆåŠŸæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå°±è¢«è®¤ä¸ºäº‹åŠ¡å·²ç»æ‰§è¡ŒæˆåŠŸï¼ˆå³ä½¿ redo log æ˜¯ prepare ä¹Ÿæ²¡æœ‰å…³ç³»ï¼‰ã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/log/prepare-commit.png"
width="887"
height="859"
srcset="https://emerywan.github.io/blog/blog/p/mysql/log/prepare-commit_hu761b281e24776a109dc5986da4421988_282489_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/log/prepare-commit_hu761b281e24776a109dc5986da4421988_282489_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="103"
data-flex-basis="247px"
>&lt;/p>
&lt;h3 id="-undo-log-å›æ»šæ—¥å¿—">ğŸ”™ undo log å›æ»šæ—¥å¿—&lt;/h3>
&lt;p>undo log æ˜¯ä¸€ç§ç”¨äºæ’¤é”€å›æ»šçš„æ—¥å¿—ã€‚InnoDB æ›´æ–°è®°å½•å‰ï¼Œä¼šå°†æ“ä½œå‰çš„æ•°æ®è®°å½•çš„ undo ä¸­ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶ï¼Œåˆ©ç”¨ undo log è¿›è¡Œå›æ»šã€‚&lt;/p>
&lt;p>undo log ä¸»è¦ç”¨äºï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ğŸ—ï¸ å®ç°äº‹åŠ¡å›æ»šï¼Œä¿éšœäº‹åŠ¡ ACID ä¸­çš„åŸå­æ€§&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ—ï¸ undo log ä¸ ReadView é…åˆï¼Œå®ç° MVCC&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åœ¨ InnoDB å­˜å‚¨å¼•æ“å¯¹è®°å½•è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šæŠŠå›æ»šéœ€è¦çš„ä¿¡æ¯å…¨éƒ¨è®°å½•åˆ° undo ä¸­ï¼Œå¦‚æœå‘ç”Ÿå›æ»šï¼Œå°±ä¼šè¯»å– undo logï¼Œç„¶åæ‰§è¡Œä¸ä¹‹ç›¸åçš„æ“ä½œã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>â• æ’å…¥æ•°æ®ï¼Œè®°å½•è¿™æ¡æ•°æ®çš„ä¸»é”®ï¼Œå›æ»šæ—¶æ ¹æ®ä¸»é”®æŠŠè¯¥æ¡è®°å½•åˆ é™¤&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â– åˆ é™¤æ•°æ®ï¼Œè®°å½•è¿™æ¡æ•°æ®çš„æ‰€æœ‰å†…å®¹ï¼Œå›æ»šæ—¶å°†è¿™äº›å†…å®¹ç»„æˆçš„è®°å½•æ’å…¥è¡¨ä¸­&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ğŸ–‹ï¸ æ›´æ–°æ•°æ®ï¼Œ&lt;/p>
&lt;ul>
&lt;li>æ›´æ–°äº†ä¸»é”®ï¼Œä¼šè®°å½•ä¸¤æ¡ undo logï¼Œä¸€æ¡åˆ é™¤çš„ï¼Œä¸€æ¡æ›´æ–°çš„&lt;/li>
&lt;li>æ²¡æœ‰æ›´æ–°ä¸»é”®ï¼Œè®°å½•è¿™æ¡æ•°æ®æ›´æ–°åˆ—çš„æ—§å€¼ï¼Œå›æ»šæ—¶å°†æ•°æ®æ›´æ–°ä¸ºæ—§å€¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="ç‰ˆæœ¬é“¾">ç‰ˆæœ¬é“¾&lt;/h4>
&lt;p>ä¸€æ¡è®°å½•çš„æ¯æ¬¡æ›´æ–°æ“ä½œäº§ç”Ÿçš„ undo log æ ¼å¼éƒ½ä¼šæœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>trx_id äº‹åŠ¡ id&lt;/p>
&lt;p>è®°å½•äº†è¯¥è®°å½•æ˜¯ç”±å“ªä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>roll_pointer å›æ»šæŒ‡é’ˆ&lt;/p>
&lt;p>å›æ»šæŒ‡é’ˆå¯ä»¥å°† undo log ä¸²è¿æˆä¸€ä¸ªé“¾è¡¨ï¼Œè¿™ä¸ªé“¾è¡¨ç§°ä¸ºç‰ˆæœ¬é“¾ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/log/version-link.webp"
width="1140"
height="591"
srcset="https://emerywan.github.io/blog/blog/p/mysql/log/version-link_hu0442ac56d20b027197f4981105a2d120_16904_480x0_resize_q75_h2_box_2.webp 480w, https://emerywan.github.io/blog/blog/p/mysql/log/version-link_hu0442ac56d20b027197f4981105a2d120_16904_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="192"
data-flex-basis="462px"
>&lt;/p></description></item><item><title>MySQL ç´¢å¼•</title><link>https://emerywan.github.io/blog/p/mysql/index/</link><pubDate>Thu, 30 Jun 2022 14:02:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/index/</guid><description>&lt;img src="https://emerywan.github.io/blog/imgs/15.jpeg" alt="Featured image of post MySQL ç´¢å¼•" />&lt;h2 id="ç´¢å¼•">ç´¢å¼•&lt;/h2>
&lt;p>ç´¢å¼•ï¼ˆindexï¼‰æ˜¯å¸®åŠ© MySQL é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä¼˜ç‚¹&lt;/p>
&lt;ul>
&lt;li>æé«˜æ•°æ®çš„æŸ¥è¯¢é€Ÿåº¦&lt;/li>
&lt;li>é™ä½æ•°æ®åº“çš„ IO æˆæœ¬&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>å ç”¨ç£ç›˜ç©ºé—´&lt;/li>
&lt;li>å¢åˆ æ”¹éœ€è¦ç»´æŠ¤ç´¢å¼•ï¼Œæ€§èƒ½å¯èƒ½ä¼šä¸‹é™&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ç´¢å¼•çš„åˆ†ç±»">ç´¢å¼•çš„åˆ†ç±»&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- æŸ¥çœ‹è¡¨ä¸­çš„ç´¢å¼•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">show&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table_name&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä¸»é”®ç´¢å¼•">ä¸»é”®ç´¢å¼•&lt;/h3>
&lt;p>å½“ä¸€å¼ è¡¨ï¼ŒæŠŠæŸä¸ªåˆ—è®¾ä¸ºä¸»é”®çš„æ—¶å€™ï¼Œåˆ™è¯¥åˆ—å°±æ˜¯ä¸»é”®ç´¢å¼•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ™®é€šç´¢å¼•">æ™®é€šç´¢å¼•&lt;/h3>
&lt;p>ç”¨è¡¨ä¸­çš„æ™®é€šåˆ—æ„å»ºçš„ç´¢å¼•ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo_index_name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">---
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo_index_name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo_table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å”¯ä¸€ç´¢å¼•">å”¯ä¸€ç´¢å¼•&lt;/h3>
&lt;p>ç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œå…è®¸æœ‰å¤šä¸ªç©ºå€¼ nullï¼ˆå’Œä¸»é”®ä¸åŒï¼Œä¸»é”®ä¸å…è®¸ä¸ºç©ºï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">unique&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">new_unique_index_name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">---
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">unique&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">new_unique_index_name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo_table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å…¨æ–‡ç´¢å¼•">å…¨æ–‡ç´¢å¼•&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">fulltext&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo_fulltext_index_content&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç»„åˆç´¢å¼•">ç»„åˆç´¢å¼•&lt;/h3>
&lt;p>ç»„åˆç´¢å¼• / è”åˆç´¢å¼•&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo_name_age_index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">demo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="èšç°‡ç´¢å¼•">èšç°‡ç´¢å¼•&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>ç´¢å¼•å’Œæ•°æ®æ”¾åœ¨ä¸€èµ·ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ®ï¼Œæ‰¾åˆ°äº†ç´¢å¼•å°±æ‰¾åˆ°äº†æ•°æ®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è®¿é—®æ•°æ®æ›´å¿«ï¼Œèšç°‡ç´¢å¼•å°†ç´¢å¼•å’Œæ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªB+æ ‘ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ’å…¥é€Ÿåº¦ä¸¥é‡ä¾èµ–äºæ’å…¥é¡ºåºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ›´æ–°èšç°‡ç´¢å¼•åˆ—çš„ä»£ä»·å¾ˆé«˜ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index8.png"
width="722"
height="369"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index8_hu9d45f79d8b338c019791de22ea52eb90_62479_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index8_hu9d45f79d8b338c019791de22ea52eb90_62479_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="index8"
class="gallery-image"
data-flex-grow="195"
data-flex-basis="469px"
>&lt;/p>
&lt;h3 id="éèšç°‡ç´¢å¼•äºŒçº§ç´¢å¼•">éèšç°‡ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰&lt;/h3>
&lt;p>å°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹å…³è”çš„æ˜¯å¯¹åº”çš„ä¸»é”®ã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/clustering-index.png"
width="840"
height="571"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/clustering-index_hub32172b742ab96d724c643b42699b935_232051_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/clustering-index_hub32172b742ab96d724c643b42699b935_232051_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="clustering-index"
class="gallery-image"
data-flex-grow="147"
data-flex-basis="353px"
>&lt;/p>
&lt;ul>
&lt;li>äºŒçº§ç´¢å¼•è®¿é—®éœ€è¦ä¸¤æ¬¡ç´¢å¼•æŸ¥æ‰¾ï¼Œè¦å›è¡¨ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index9.png"
width="727"
height="389"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index9_hua49cf0193b83cd4f61e5b4747229532b_46178_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index9_hua49cf0193b83cd4f61e5b4747229532b_46178_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="index9"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="448px"
>&lt;/p>
&lt;h2 id="ç´¢å¼•çš„ç»“æ„">ç´¢å¼•çš„ç»“æ„&lt;/h2>
&lt;h3 id="b-tree">B Tree&lt;/h3>
&lt;p>B æ ‘æ˜¯ä¸€ç§å¤šå‰å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼Œå…¶ä¸»è¦ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ ‘çš„èŠ‚ç‚¹ä¸­å­˜å‚¨ç€å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå†…èŠ‚ç‚¹æœ‰å¤šä¸ªåˆ†å‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å‚¨å­˜æ•°æ®ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸­åŒ…å«é”®å€¼å’Œæ•°æ®ï¼ŒèŠ‚ç‚¹ä¸­çš„é”®å€¼ä»å°åˆ°å¤§æ’åˆ—ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>çˆ¶èŠ‚ç‚¹å½“ä¸­çš„å…ƒç´ ä¸ä¼šå‡ºç°åœ¨å­èŠ‚ç‚¹ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½ä½äºåŒä¸€å±‚ï¼Œå¶èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„æ·±åº¦ï¼Œå¶èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰æŒ‡é’ˆè¿æ¥ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/BTree.png"
width="824"
height="496"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/BTree_hu5a2ea9e01a7974b484f27a03994c1eb9_162577_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/BTree_hu5a2ea9e01a7974b484f27a03994c1eb9_162577_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="BTree"
class="gallery-image"
data-flex-grow="166"
data-flex-basis="398px"
>&lt;/p>
&lt;h3 id="b-tree-1">B+ Tree&lt;/h3>
&lt;p>B+ æ ‘æ˜¯ B æ ‘çš„å‡çº§ç‰ˆã€‚B+ æ ‘åœ¨ç»“æ„ä¸Šå’ŒBæ ‘çš„åŒºåˆ«åœ¨äºï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åªæœ‰å¶å­èŠ‚ç‚¹æ‰ä¼šå­˜å‚¨æ•°æ®ï¼Œéå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ï¼Œç”¨äºæŸ¥æ‰¾ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¶å­èŠ‚ç‚¹ä¹‹é—´ä½¿ç”¨åŒå‘æŒ‡é’ˆè¿æ¥ï¼Œæœ€åº•å±‚çš„å¶å­èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªåŒå‘æœ‰åºé“¾è¡¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¶å­èŠ‚ç‚¹ä¿å­˜äº†çˆ¶èŠ‚ç‚¹æ‰€æœ‰å…³é”®å­—è®°å½•çš„æŒ‡é’ˆã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/BTree2.png"
width="726"
height="486"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/BTree2_hu9d51150ef65d39ad05b8ca626e16e349_124398_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/BTree2_hu9d51150ef65d39ad05b8ca626e16e349_124398_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="B&amp;#43;Tree"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="358px"
>&lt;/p>
&lt;p>ç›¸æ¯”ä¸ B æ ‘ï¼ŒB+ æ ‘æœ‰ä»¥ä¸‹æå‡ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ‰«è¡¨èƒ½åŠ›æ›´å¼ºï¼ˆè¿›è¡Œå…¨è¡¨æ‰«æï¼Œåªéœ€è¦éå†å¶å­èŠ‚ç‚¹å³å¯ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…·æœ‰æ›´å¥½çš„ç£ç›˜è¯»å†™èƒ½åŠ›ï¼ˆéå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œä½¿æ ‘æ›´çŸ®ï¼ŒIO æ“ä½œæ›´å°‘ï¼Œä¸€æ¬¡ç£ç›˜åŠ è½½æ‰«æèŒƒå›´æ›´å¤§ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŸ¥è¯¢æ•ˆç‡ç¨³å®šï¼ˆæ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼ŒIO æ¬¡æ•°ç¨³å®šï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¢åˆ æ•°æ®æ•ˆç‡æ›´é«˜ï¼ˆæ•°æ®åœ¨å¶å­èŠ‚ç‚¹ä»¥æœ‰åºé“¾è¡¨å­˜å‚¨ï¼Œå¯æé«˜æ•°æ®å¢åˆ æ•ˆç‡ï¼‰&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æ•°æ®åº“ä¸­ï¼ŒB+ æ ‘çš„é«˜åº¦ä¸€èˆ¬éƒ½åœ¨ 2~4 å±‚ã€‚ç”±äº MySQL çš„ INNODB å¼•æ“åœ¨è®¾è®¡æ—¶æ˜¯å°† B+ æ ‘çš„æ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜çš„ï¼Œå› æ­¤åœ¨æŸ¥æ‰¾æŸä¸€é”®å€¼çš„è¡Œè®°å½•æ—¶ï¼Œæœ€å¤šåªéœ€è¦ 1~3 æ¬¡ç£ç›˜IOã€‚&lt;/p>
&lt;h3 id="hash">Hash&lt;/h3>
&lt;p>æ”¯æŒ hash ç´¢å¼•çš„æ˜¯ Memory å­˜å‚¨å¼•æ“ã€‚é‡‡ç”¨ä¸€å®šçš„ hash ç®—æ³•ï¼Œå°†é”®å€¼æ¢ç®—æˆæ–°çš„ hash å€¼ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„æ§½ä½ä¸Šï¼Œç„¶åå­˜å‚¨åœ¨ hash è¡¨ä¸­ã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/hash.png"
width="551"
height="297"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/hash_hu44e081159408b7a12e5ef78d4b9f0b5d_44702_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/hash_hu44e081159408b7a12e5ef78d4b9f0b5d_44702_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="hash"
class="gallery-image"
data-flex-grow="185"
data-flex-basis="445px"
>&lt;/p>
&lt;p>ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼ˆ=, inï¼‰ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆbetween, &amp;gt;, &amp;lt;ï¼‰&lt;/li>
&lt;li>æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆæ’åºæ“ä½œ&lt;/li>
&lt;li>æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€šå¸¸åªéœ€è¦ä¸€æ¬¡æ£€ç´¢ï¼ˆæ—  hash å†²çªçš„æƒ…å†µï¼‰&lt;/li>
&lt;/ul>
&lt;h2 id="åˆ›å»ºç´¢å¼•çš„åŸåˆ™">åˆ›å»ºç´¢å¼•çš„åŸåˆ™&lt;/h2>
&lt;h3 id="-å»ºè®®åˆ›å»ºç´¢å¼•">ğŸ™† å»ºè®®åˆ›å»ºç´¢å¼•&lt;/h3>
&lt;ul>
&lt;li>âœ… &lt;code>select&lt;/code> è¯­å¥ï¼Œé¢‘ç¹ä½œä¸º &lt;code>where&lt;/code> æ¡ä»¶çš„å­—æ®µ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Georgi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- index(first_name)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Georgi&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Cools&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- è”åˆç´¢å¼•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- index(first_name, last_name)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- æ³¨æ„æ»¡è¶³ï¼šæœ€å·¦å‰ç¼€åŸåˆ™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- index(last_name, first_name) -&amp;gt; where first_name=&amp;#34;Georgi&amp;#34; æ— æ³•ä½¿ç”¨ç´¢å¼•
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>âœ… &lt;code>update/delete&lt;/code> è¯­å¥çš„ &lt;code>where&lt;/code> æ¡ä»¶&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">update&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Jim&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;100001&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">delete&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fitst_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Georgi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>âœ… éœ€è¦åˆ†ç»„ï¼Œæ’åºçš„å­—æ®µ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dept_emp&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">group&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>âœ… ä½¿ç”¨ &lt;code>distinct&lt;/code> çš„å­—æ®µ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">distinct&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>âœ… å­—æ®µéœ€è¦å”¯ä¸€æ€§çº¦æŸ&lt;/p>
&lt;ul>
&lt;li>å”¯ä¸€ç´¢å¼•&lt;/li>
&lt;li>ä¸»é”®ç´¢å¼•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>âœ… å¤šè¡¨æŸ¥è¯¢ï¼Œè¿æ¥å­—æ®µåº”åˆ›å»ºç´¢å¼•&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç±»å‹åŠ¡å¿…ä¿æŒä¸€è‡´&lt;/strong>ï¼Œé¿å…éšå¼è£…æ¢&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dept_emp&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">departments&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;100001&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- employees.emp_no dept_emp.emp_no ç±»å‹åŠ¡å¿…ä¿æŒä¸€è‡´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- dept_emp.dept_no departmants.dept_no ç±»å‹åŠ¡å¿…ä¿æŒä¸€è‡´
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-ä¸å»ºè®®åˆ›å»ºç´¢å¼•">ğŸ™… ä¸å»ºè®®åˆ›å»ºç´¢å¼•&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>âŒ &lt;code>where&lt;/code> å­å¥ä¸­ç”¨ä¸åˆ°çš„å­—æ®µ&lt;/p>
&lt;p>ç´¢å¼•çš„ä½œç”¨æ˜¯å¿«é€Ÿå®šä½åˆ°æƒ³è¦çš„æ•°æ®ï¼Œç”¨ä¸åˆ°å°±æ²¡æœ‰å¿…è¦åˆ›å»ºæ•°æ®äº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>âŒ è¡¨é‡Œçš„è®°å½•éå¸¸å°‘&lt;/p>
&lt;p>å¦‚åªæœ‰ 100 æ¡æ•°æ®ï¼Œæœ‰æ— å½±å“ä¸å¤§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>âŒ æœ‰å¤§é‡é‡å¤æ•°æ®ï¼Œé€‰æ‹©æ€§ä½&lt;/p>
&lt;p>å¦‚ï¼šæ€§åˆ«å­—æ®µï¼Œå¯¼è‡´å¤§é‡å›è¡¨ã€‚&lt;/p>
&lt;p>ç´¢å¼•çš„é€‰æ‹©æ€§è¶Šé«˜ï¼ŒæŸ¥è¯¢æ•ˆç‡è¶Šå¥½ï¼Œå¯ä»¥åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­è¿‡æ»¤æ›´å¤šçš„è¡Œ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>âŒ é¢‘ç¹æ›´æ–°çš„å­—æ®µï¼Œåˆ›å»ºç´¢å¼•è¦è€ƒè™‘ç»´æŠ¤ç´¢å¼•çš„å¼€é”€&lt;/p>
&lt;p>é¢‘ç¹ä¿®æ”¹çš„å­—æ®µï¼Œä¸æ¨èåˆ›å»ºç´¢å¼•ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="ç´¢å¼•å¤±æ•ˆä¸è§£å†³æ–¹æ¡ˆ">ç´¢å¼•å¤±æ•ˆä¸è§£å†³æ–¹æ¡ˆ&lt;/h2>
&lt;blockquote>
&lt;p>æ˜¯å¦ä½¿ç”¨ç´¢å¼•å–å†³äº ğŸš€ æŸ¥è¯¢ä»£ä»·&lt;/p>
&lt;p>å³ä½¿å¯ä»¥ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œä½† MySQL è¯„ä¼°åï¼Œä¸å¦‚å…¨è¡¨æ‰«æï¼Œä¼šæ”¾å¼ƒä½¿ç”¨ç´¢å¼•&lt;/p>
&lt;/blockquote>
&lt;h3 id="-ç´¢å¼•åˆ—ä¸ç‹¬ç«‹è¿›è¡Œäº†è®¡ç®—æˆ–å˜æˆäº†å‚æ•°">âš ï¸ ç´¢å¼•åˆ—ä¸ç‹¬ç«‹ï¼Œè¿›è¡Œäº†è®¡ç®—æˆ–å˜æˆäº†å‚æ•°&lt;/h3>
&lt;ul>
&lt;li>ç´¢å¼•å­—æ®µè¿›è¡Œäº†è¡¨è¾¾å¼è®¡ç®—&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">form&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100003&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index1.png"
width="1185"
height="157"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index1_huaa761d032e691cca90bef5eef1dadb87_81724_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index1_huaa761d032e691cca90bef5eef1dadb87_81724_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="1"
class="gallery-image"
data-flex-grow="754"
data-flex-basis="1811px"
>&lt;/p>
&lt;p>åº”äº‹å…ˆè®¡ç®—å¥½è¡¨è¾¾å¼çš„å€¼ï¼Œå†ä¼ å…¥ï¼Œé¿å…åœ¨ SQL &lt;code>where&lt;/code> çš„å·¦ä¾§åšè®¡ç®—ã€‚&lt;/p>
&lt;ul>
&lt;li>ç´¢å¼•å­—æ®µæ˜¯å‡½æ•°çš„å‚æ•°&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fitst_name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Geo&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äº‹å…ˆè®¡ç®—å¥½å†ä¼ å…¥ã€‚&lt;/p>
&lt;p>æˆ–è€…ä½¿ç”¨ä¸€äº›ç­‰ä»·çš„ SQLã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Geo%&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- first_name éœ€è¦æ˜¯ç´¢å¼•çš„æƒ…å†µä¸‹æœ‰æ•ˆï¼ˆæ ¹æ®å®é™…åœºæ™¯ï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- æ³¨æ„ like ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µ
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index2.png"
width="1169"
height="154"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index2_hu58e272ce7b5bb61c6085e6a94f631f41_86327_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index2_hu58e272ce7b5bb61c6085e6a94f631f41_86327_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="2"
class="gallery-image"
data-flex-grow="759"
data-flex-basis="1821px"
>&lt;/p>
&lt;h3 id="-ä½¿ç”¨äº†å·¦æ¨¡ç³Š">âš ï¸ ä½¿ç”¨äº†å·¦æ¨¡ç³Š&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;%Geo%&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- æ— æ³•ä½¿ç”¨ç´¢å¼•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Geo%&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- å¯ä»¥ä½¿ç”¨ç´¢å¼•
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæ— æ³•é¿å…ï¼Œä¸”æœ‰è¾ƒé«˜éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æœç´¢å¼•æ“ã€‚&lt;/p>
&lt;h3 id="-or-æŸ¥è¯¢çš„éƒ¨åˆ†å­—æ®µæ²¡æœ‰ç´¢å¼•">âš ï¸ or æŸ¥è¯¢çš„éƒ¨åˆ†å­—æ®µæ²¡æœ‰ç´¢å¼•&lt;/h3>
&lt;p>or çš„å«ä¹‰æ˜¯ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³ä¸€ä¸ªå³å¯ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªæ¡ä»¶åˆ—æœ‰ç´¢å¼•æ˜¯æ— ç”¨çš„ã€‚åªè¦æ¡ä»¶åˆ—ä¸­æœ‰ä¸€ä¸ªä¸æ˜¯ç´¢å¼•åˆ—ï¼Œå°±ä¼šè¿›è¡Œå…¨è¡¨æ‰«æã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Georgi&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">or&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Georgi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- å‡è®¾å½“å‰ first_name æœ‰ç´¢å¼•ï¼Œlast_name æ²¡æœ‰ç´¢å¼•ï¼Œè¯¥æ¡ sql æ— æ³•ä½¿ç”¨ç´¢å¼•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- index(fitst_name)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index3.png"
width="1148"
height="176"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index3_hua5c1e2b296fd025c6e1f6de1e5790543_84429_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index3_hua5c1e2b296fd025c6e1f6de1e5790543_84429_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="3"
class="gallery-image"
data-flex-grow="652"
data-flex-basis="1565px"
>&lt;/p>
&lt;p>è§£å†³ï¼šæ ¹æ®å®é™…ä¸šåŠ¡ï¼Œæ·»åŠ ç›¸åº”çš„ç´¢å¼•ã€‚&lt;/p>
&lt;p>æ·»åŠ ç´¢å¼•åï¼Œé¿å…äº†å…¨è¡¨æ‰«æã€‚&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index4.png"
width="1129"
height="139"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index4_hu903a3bbf3d6eb2ece40fc0c15484c985_86767_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index4_hu903a3bbf3d6eb2ece40fc0c15484c985_86767_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="4"
class="gallery-image"
data-flex-grow="812"
data-flex-basis="1949px"
>&lt;/p>
&lt;h3 id="-ä¸ç¬¦åˆæœ€å·¦å‰ç¼€åŸåˆ™çš„æŸ¥è¯¢">âš ï¸ ä¸ç¬¦åˆæœ€å·¦å‰ç¼€åŸåˆ™çš„æŸ¥è¯¢&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Facello&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- index(last_name, first_name)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index5.png"
width="1156"
height="155"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index5_huc69773c1cc30429ec167298f8192f5a8_78720_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index5_huc69773c1cc30429ec167298f8192f5a8_78720_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="5"
class="gallery-image"
data-flex-grow="745"
data-flex-basis="1789px"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Facello&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- æ›´æ¢ç´¢å¼•é¡ºåº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- index(first_name, last_name)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index6.png"
width="1144"
height="179"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index6_huc94bdeb83f55eebd5e2d4f615313b023_79724_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index6_huc94bdeb83f55eebd5e2d4f615313b023_79724_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="6"
class="gallery-image"
data-flex-grow="639"
data-flex-basis="1533px"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- index(first_name, last_name)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- MySQL çš„å¼•æ“ä¸ºæ›´å¥½åˆ©ç”¨å¤åˆç´¢å¼•ï¼Œä¼šåŠ¨æ€è°ƒæ•´å­—æ®µé¡ºåº
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-å­—ç¬¦ä¸²æ¡ä»¶æ²¡æœ‰ä½¿ç”¨-">âš ï¸ å­—ç¬¦ä¸²æ¡ä»¶æ²¡æœ‰ä½¿ç”¨ &amp;quot;&amp;quot;&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dept_emp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- è¿™é‡Œ dept_no åœ¨æ•°æ®åº“å®šä¹‰ä¸º varchar
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-éšå¼è½¬æ¢å¯¼è‡´ç´¢å¼•å¤±æ•ˆ">âš ï¸ éšå¼è½¬æ¢å¯¼è‡´ç´¢å¼•å¤±æ•ˆ&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employees&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dept_emp&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">emp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">departments&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">de&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;100001&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- employees.emp_no dept_emp.emp_no ç±»å‹ä¸ä¸€è‡´æ—¶ä¼šå¯¼è‡´éšå¼è½¬æ¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- dept_emp de departments.dept_no ç±»å‹ä¸ä¸€è‡´æ—¶ä¼šå¯¼è‡´éšå¼è½¬æ¢
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="null-æ¡ä»¶æŸ¥è¯¢">null æ¡ä»¶æŸ¥è¯¢&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>æŸ¥è¯¢æ—¶ï¼Œé‡‡ç”¨ &lt;code>is null&lt;/code> &lt;code>is not null&lt;/code> æ¡ä»¶ï¼Œæ ¹æ®è¡¨ä¸­çš„æ•°æ®åˆ†å¸ƒï¼Œ&lt;strong>MySQL ä¼šè‡ªè¡Œåˆ¤æ–­æ˜¯å¦èµ°ç´¢å¼•ï¼Œå¹¶ä¸å›ºå®š&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>MySQL å®˜æ–¹å»ºè®®å°½é‡æŠŠå­—æ®µå®šä¹‰ä¸º &lt;code>NOT NULL&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/index/index7.png"
width="821"
height="497"
srcset="https://emerywan.github.io/blog/blog/p/mysql/index/index7_hu4d7b4705c5cf93f7dc141b75d9f23067_225180_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/index/index7_hu4d7b4705c5cf93f7dc141b75d9f23067_225180_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="7"
class="gallery-image"
data-flex-grow="165"
data-flex-basis="396px"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">explain&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mobile&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="mysql-è¯„ä¼°å…¨è¡¨æ‰«ææ›´å¿«">MySQL è¯„ä¼°å…¨è¡¨æ‰«ææ›´å¿«&lt;/h3>
&lt;p>MySQL åœ¨æŸ¥è¯¢æ—¶ï¼Œä¼šè¯„ä¼°ä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡ä¸èµ°å…¨è¡¨æ‰«æçš„æ•ˆç‡ï¼Œå¦‚æœèµ°å…¨è¡¨æ‰«ææ›´å¿«ï¼Œåˆ™æ”¾å¼ƒç´¢å¼•ï¼Œèµ°å…¨è¡¨æ‰«æã€‚&lt;/p>
&lt;p>å› ä¸ºç´¢å¼•æ˜¯ç”¨æ¥ç´¢å¼•å°‘é‡æ•°æ®çš„ï¼Œå¦‚æœé€šè¿‡ç´¢å¼•æŸ¥è¯¢è¿”å›å¤§æ‰¹é‡çš„æ•°æ®ï¼Œåˆ™è¿˜ä¸å¦‚èµ°å…¨è¡¨æ‰«ææ¥çš„å¿«ï¼Œæ­¤æ—¶ç´¢å¼•å°±ä¼šå¤±æ•ˆã€‚&lt;/p>
&lt;h2 id="æœ€å·¦å‰ç¼€æ³•åˆ™">æœ€å·¦å‰ç¼€æ³•åˆ™&lt;/h2>
&lt;p>æœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚&lt;/p>
&lt;p>å¦‚æœè·³è·ƒæŸä¸€åˆ—ï¼Œç´¢å¼•å°†ä¼šéƒ¨åˆ†å¤±æ•ˆ(åé¢çš„å­—æ®µç´¢å¼•å¤±æ•ˆ)ã€‚&lt;/p>
&lt;p>ä¸­é—´ä¸èƒ½è·³è¿‡æŸä¸€åˆ—ï¼Œå¦åˆ™è¯¥åˆ—åé¢çš„å­—æ®µç´¢å¼•å°†å¤±æ•ˆã€‚&lt;/p>
&lt;h2 id="èŒƒå›´æŸ¥è¯¢">èŒƒå›´æŸ¥è¯¢&lt;/h2>
&lt;p>è”åˆç´¢å¼•ä¸­ï¼Œå‡ºç°èŒƒå›´æŸ¥è¯¢(&amp;gt;, &amp;lt;)ï¼ŒèŒƒå›´æŸ¥è¯¢å³ä¾§çš„åˆ—ç´¢å¼•å¤±æ•ˆã€‚&lt;/p>
&lt;h2 id="è¦†ç›–ç´¢å¼•">è¦†ç›–ç´¢å¼•&lt;/h2>
&lt;p>å¯¹äºç´¢å¼• Xï¼Œ&lt;code>SELECT&lt;/code> çš„å­—æ®µåªéœ€è¦ä»ç´¢å¼•ä¸­å°±èƒ½è·å¾—ï¼Œè€Œæ— éœ€å›è¡¨è·å–ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- index(name, age, pos)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pos&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">staffs&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;July&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å‰ç¼€ç´¢å¼•">å‰ç¼€ç´¢å¼•&lt;/h2>
&lt;p>å½“å­—æ®µç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆvarcharï¼Œtextï¼Œlongtextç­‰ï¼‰æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç´¢å¼•å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¼šè®©
ç´¢å¼•å˜å¾—å¾ˆå¤§ï¼ŒæŸ¥è¯¢æ—¶ï¼Œæµªè´¹å¤§é‡çš„ç£ç›˜ IOï¼Œ å½±å“æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/p>
&lt;p>å¯ä»¥åªå°†å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‰ç¼€ï¼Œå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´ï¼Œä»è€Œæé«˜ç´¢å¼•æ•ˆç‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- ä¸º email å­—æ®µï¼Œå»ºç«‹ç´¢å¼•é•¿åº¦ä¸º 5 çš„å‰ç¼€ç´¢å¼•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">index_email_5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tb_user&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="explain">explain&lt;/h2>
&lt;p>æŸ¥çœ‹ SQL è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ã€‚å­—æ®µå«ä¹‰ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>id&lt;/p>
&lt;ul>
&lt;li>åœ¨ä¸€ä¸ªå¤§çš„æŸ¥è¯¢è¯­å¥ä¸­ï¼Œæ¯ä¸ª select å…³é”®å­—éƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€ id&lt;/li>
&lt;li>id ç›¸åŒï¼Œæ‰§è¡Œé¡ºåºä»ä¸Šåˆ°ä¸‹ï¼›id ä¸åŒï¼Œå€¼è¶Šå¤§ï¼Œè¶Šå…ˆæ‰§è¡Œ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>select_type&lt;/p>
&lt;ul>
&lt;li>è¡¨ç¤º select å¯¹åº”çš„æŸ¥è¯¢ç±»å‹&lt;/li>
&lt;li>SIMPLE (ç®€å• select,ä¸ä½¿ç”¨ union æˆ–å­æŸ¥è¯¢ç­‰)&lt;/li>
&lt;li>PRIMARY (æŸ¥è¯¢ä¸­è‹¥åŒ…å«ä»»ä½•å¤æ‚çš„å­éƒ¨åˆ†,æœ€å¤–å±‚çš„ select è¢«æ ‡è®°ä¸º PRIMARY)&lt;/li>
&lt;li>UNION (union ä¸­çš„ç¬¬äºŒä¸ªæˆ–åé¢çš„ select è¯­å¥)&lt;/li>
&lt;li>SUBQUERY (å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª select)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>table&lt;/p>
&lt;ul>
&lt;li>è¿™ä¸€è¡Œçš„æ•°æ®æ˜¯å…³äºå“ªå¼ è¡¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>type&lt;/p>
&lt;ul>
&lt;li>MySQL åœ¨è¡¨ä¸­æ‰¾åˆ°æ‰€éœ€è¡Œçš„æ–¹å¼&lt;/li>
&lt;li>æ€§èƒ½ç”±å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸ºï¼šNULLã€systemã€constã€eq_refï¼‰ã€refã€rangeã€indexã€allï¼ˆå…¨è¡¨æ‰«æï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>possible_keys&lt;/p>
&lt;ul>
&lt;li>å¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸Šçš„ç´¢å¼•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>key&lt;/p>
&lt;ul>
&lt;li>å®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœä¸º NULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>key_len&lt;/p>
&lt;ul>
&lt;li>å®é™…ä½¿ç”¨ç´¢å¼•çš„é•¿åº¦ï¼ˆè¯¥å€¼ä¸ºç´¢å¼•å­—æ®µæœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¹¶éå®é™…ä½¿ç”¨é•¿åº¦ï¼Œåœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ref&lt;/p>
&lt;ul>
&lt;li>ä¸Šè¿°è¡¨çš„è¿æ¥åŒ¹é…æ¡ä»¶ï¼Œå³å“ªäº›åˆ—æˆ–å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>rows&lt;/p>
&lt;ul>
&lt;li>MySQL è®¤ä¸ºå¿…é¡»è¦æ‰§è¡ŒæŸ¥è¯¢çš„è¡Œæ•°ï¼Œåœ¨ innodb å¼•æ“çš„è¡¨ä¸­ï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œä¸æ˜¯å‡†ç¡®çš„&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Extra&lt;/p>
&lt;ul>
&lt;li>MySQLè§£å†³æŸ¥è¯¢çš„è¯¦ç»†ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="å‚è€ƒ">å‚è€ƒ&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://juejin.cn/post/6936032090546765837" target="_blank" rel="noopener"
>https://juejin.cn/post/6936032090546765837&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>æ•°æ®åº“åŸºç¡€æ€»ç»“</title><link>https://emerywan.github.io/blog/p/mysql/sql-base/</link><pubDate>Wed, 01 Jun 2022 18:02:02 +0800</pubDate><guid>https://emerywan.github.io/blog/p/mysql/sql-base/</guid><description>&lt;img src="https://emerywan.github.io/blog/imgs/29.jpeg" alt="Featured image of post æ•°æ®åº“åŸºç¡€æ€»ç»“" />&lt;h2 id="åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ›å»ºè¡¨">åˆ›å»ºè¡¨&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">col1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">col2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">col3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä¿®æ”¹è¡¨">ä¿®æ”¹è¡¨&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">alter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">add&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">char&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">alter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">drop&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">column&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ é™¤è¡¨">åˆ é™¤è¡¨&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">drop&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ’å…¥ä¿¡æ¯">æ’å…¥ä¿¡æ¯&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">insert&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">values&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;val1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;val2&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ›´æ–°ä¿¡æ¯">æ›´æ–°ä¿¡æ¯&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">update&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ é™¤ä¿¡æ¯">åˆ é™¤ä¿¡æ¯&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">delete&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æŸ¥è¯¢">æŸ¥è¯¢&lt;/h2>
&lt;h3 id="distinct">distinct&lt;/h3>
&lt;p>å»é‡&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">distinct&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="limit">limit&lt;/h3>
&lt;p>é™åˆ¶è¿”å›çš„è¡Œæ•°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- è¿”å›å‰5è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- è¿”å› 3-5 è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- offset:2, limit:3 è·³è¿‡2è¡Œå–3ä¸ªç»“æœ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">offset&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="asc">asc&lt;/h2>
&lt;p>å‡åºï¼ˆé»˜è®¤ï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">asc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="desc">desc&lt;/h2>
&lt;p>é™åº&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">desc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è¿‡æ»¤">è¿‡æ»¤&lt;/h2>
&lt;p>where&lt;/p>
&lt;ul>
&lt;li>
&lt;p>= ç­‰äº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&amp;lt; å°äº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&amp;gt; å¤§äº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>!= ä¸ç­‰äº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&amp;lt;= å°äºç­‰äº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&amp;gt;= å¤§äºç­‰äº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>between &amp;hellip; and &amp;hellip; ä¸¤ä¸ªå€¼ä¹‹é—´ï¼ˆå·¦é—­å³é—­åŒºé—´ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>is null ç©ºå€¼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>and&lt;/p>
&lt;/li>
&lt;li>
&lt;p>or&lt;/p>
&lt;/li>
&lt;li>
&lt;p>in&lt;/p>
&lt;/li>
&lt;li>
&lt;p>not&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é€šé…ç¬¦">é€šé…ç¬¦&lt;/h2>
&lt;ul>
&lt;li>&lt;code>%&lt;/code>
&lt;ul>
&lt;li>åŒ¹é… &amp;gt;= 0 ä¸ªå­—ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>_&lt;/code>
&lt;ul>
&lt;li>åŒ¹é…ä¸€ä¸ªå­—ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>[]&lt;/code>
&lt;ul>
&lt;li>åŒ¹é…é›†åˆå†…ä¸­çš„ä»»ä¸€å­—ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>[^]&lt;/code>
&lt;ul>
&lt;li>ä¸åŒ¹é…é›†åˆå†…çš„ä»»ä¸€å­—ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- ä¸ä»¥ A B å¼€å¤´çš„ä»»æ„æ–‡æœ¬
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;[^AB]%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- å­¦å·çš„æœ€åä¸€ä½ä¸æ˜¯2ã€3ã€5çš„å­¦ç”Ÿä¿¡æ¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">å­¦ç”Ÿè¡¨&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">å­¦å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;%[^235]&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- æŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­å§“ å¼ ã€æã€åˆ˜ çš„å­¦ç”Ÿçš„æƒ…å†µã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">å­¦ç”Ÿè¡¨&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">å§“å&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;[å¼ æåˆ˜]%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ†ç»„">åˆ†ç»„&lt;/h2>
&lt;p>GROUP BY&lt;/p>
&lt;p>æŠŠå…·æœ‰ç›¸åŒçš„æ•°æ®å€¼çš„è¡Œï¼Œæ”¾åœ¨åŒä¸€ç»„ä¸­ã€‚&lt;/p>
&lt;p>å¯ä»¥å¯¹åŒä¸€åˆ†ç»„æ•°æ®ï¼Œä½¿ç”¨æ±‡æ€»å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚æ±‚åˆ†ç»„æ•°æ®çš„å¹³å‡å€¼ã€‚&lt;/p>
&lt;p>æŒ‡å®šçš„åˆ†ç»„å­—æ®µï¼Œå¤„ç†èƒ½æŒ‰å­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œä¹Ÿä¼šè‡ªåŠ¨æŒ‰è¯¥å­—æ®µè¿›è¡Œæ’åºã€‚&lt;/p>
&lt;p>HAVING è¿‡æ»¤åˆ†ç»„ã€‚&lt;/p>
&lt;h2 id="å­æŸ¥è¯¢">å­æŸ¥è¯¢&lt;/h2>
&lt;p>å­æŸ¥è¯¢åªèƒ½è¿”å›ä¸€ä¸ªå­—æ®µçš„æ•°æ®ã€‚å¯ä»¥å°†å­æŸ¥è¯¢çš„ç»“æœä½œä¸º where è¯­å¥çš„è¿‡æ»¤æ¡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">cust_name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cust_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cust_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">corder_num&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customers&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">cust_name&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è¿æ¥">è¿æ¥&lt;/h2>
&lt;p>æŠŠä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨çš„è¡Œç»“åˆèµ·æ¥&lt;/p>
&lt;p>&lt;img src="https://emerywan.github.io/blog/blog/p/mysql/sql-base/sql-join.png"
width="966"
height="760"
srcset="https://emerywan.github.io/blog/blog/p/mysql/sql-base/sql-join_hu7ef284e13e9cf28fd7f9189c5de87613_174040_480x0_resize_box_3.png 480w, https://emerywan.github.io/blog/blog/p/mysql/sql-base/sql-join_hu7ef284e13e9cf28fd7f9189c5de87613_174040_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="sql-join"
class="gallery-image"
data-flex-grow="127"
data-flex-basis="305px"
>&lt;/p>
&lt;h3 id="join--inner-join">JOIN / INNER JOIN&lt;/h3>
&lt;p>è¡¨ä¸­å­˜åœ¨è‡³å°‘ä¸€ä¸ªåŒ¹é…æ—¶è¿”å›è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">inner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">site_id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--- inner join å’Œ join æ˜¯ä¸€æ ·çš„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">site_id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="left-join">LEFT JOIN&lt;/h3>
&lt;p>ä» å·¦è¡¨ è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ã€‚ï¼ˆæ²¡æœ‰åŒ¹é…æ˜¾ç¤ºç»“æœä¸º nullï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- è¿”å›æ‰€æœ‰çš„ç½‘ç«™åŠä»–ä»¬çš„è®¿é—®é‡ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- å°† website ä½œä¸ºå·¦è¡¨ï¼Œaccess_log ä½œä¸ºå³è¡¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">site_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">desc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="right-join">RIGHT JOIN&lt;/h3>
&lt;p>ä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå³ä½¿åæ ‡æ²¡æœ‰åŒ¹é…ã€‚ï¼ˆå·¦è¡¨æ²¡æœ‰åŒ¹é…æ˜¾ç¤ºç»“æœä¸º nullï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- è¿”å›æ‰€æœ‰ç½‘ç«™çš„è®¿é—®è®°å½•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- åœ¨å·¦è¡¨ä¸­æ²¡æœ‰è®°å½•ï¼Œä¹Ÿä¼šæ˜¾ç¤º null
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">right&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">site_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">desc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="full-joinä¸æ”¯æŒ">FULL JOINï¼ˆä¸æ”¯æŒï¼‰&lt;/h3>
&lt;p>ï¼ˆMySQL ä¸æ”¯æŒï¼Œä½¿ç”¨ union æ‹¼æ¥ï¼‰&lt;/p>
&lt;p>å…¨è¿æ¥ã€‚
åªè¦å·¦è¡¨ï¼Œå³è¡¨ï¼Œå…¶ä¸­ä¸€ä¸ªè¡¨å­˜åœ¨åŒ¹é…ï¼Œåˆ™è¿”å›è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">full&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">site_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">website&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">site_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access_log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">desc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è‡ªè¿æ¥">è‡ªè¿æ¥&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- æ‰¾å‡ºä¸ jim å¤„åœ¨åŒä¸€éƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥çš„å§“å
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">department&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">department&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;jim&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">inner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">department&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">department&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;jim&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç»„åˆ">ç»„åˆ&lt;/h2>
&lt;p>union ç»„åˆä¸¤ä¸ªæŸ¥è¯¢ã€‚æ¯ä¸ªæŸ¥è¯¢å¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—ï¼Œè¡¨è¾¾å¼å’Œèšé›†å‡½æ•°ã€‚&lt;/p>
&lt;p>é»˜è®¤å»é™¤ç›¸åŒçš„è¡Œï¼Œå¦‚æœéœ€è¦ä¿ç•™ç›¸åŒçš„è¡Œï¼Œä½¿ç”¨ union allã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">union&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mytable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å‡½æ•°">å‡½æ•°&lt;/h2>
&lt;h3 id="è®¡ç®—å­—æ®µ">è®¡ç®—å­—æ®µ&lt;/h3>
&lt;ul>
&lt;li>avg()
&lt;ul>
&lt;li>å¹³å‡å€¼ï¼ˆä¼šå¿½ç•¥ null è¡Œï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>round()
&lt;ul>
&lt;li>round(x) å››èˆäº”å…¥ï¼›round(x, n) ä¿ç•™ n ä½å°æ•°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>count()
&lt;ul>
&lt;li>è¿”å›æŸåˆ—çš„è¡Œæ•°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>max()
&lt;ul>
&lt;li>è¿”å›æŸåˆ—çš„æœ€å¤§å€¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>min()
&lt;ul>
&lt;li>è¿”å›æŸåˆ—çš„æœ€å°å€¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>sum()
&lt;ul>
&lt;li>æŸåˆ—ä¹‹å’Œ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="æ–‡æœ¬å¤„ç†">æ–‡æœ¬å¤„ç†&lt;/h3>
&lt;ul>
&lt;li>left()
&lt;ul>
&lt;li>å·¦è¾¹çš„å­—ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>right()
&lt;ul>
&lt;li>å³è¾¹çš„å­—ç¬¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>lower()
&lt;ul>
&lt;li>è½¬æ¢æˆå°å†™&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>upper()
&lt;ul>
&lt;li>è½¬æ¢æˆå¤§å†™&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ltrem()
&lt;ul>
&lt;li>å»é™¤å·¦è¾¹çš„ç©ºæ ¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>rtrem()
&lt;ul>
&lt;li>å»é™¤å³è¾¹çš„ç©ºæ ¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>length()
&lt;ul>
&lt;li>é•¿åº¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>soundex()
&lt;ul>
&lt;li>è½¬æ¢æˆè¯­éŸ³å€¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="æ¡ä»¶å‡½æ•°">æ¡ä»¶å‡½æ•°&lt;/h3>
&lt;ul>
&lt;li>&lt;code>if(expr, v1, v2)&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>expr æˆç«‹ï¼Œè¿”å›ç»“æœ v1ï¼Œå¦åˆ™è¿”å› v2ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- SELECT IF(1 &amp;gt; 0,&amp;#39;æ­£ç¡®&amp;#39;,&amp;#39;é”™è¯¯&amp;#39;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- -&amp;gt;æ­£ç¡®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- --
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- å°†ç”¨æˆ·åˆ’åˆ†ä¸º25å²ä»¥ä¸‹å’Œ25å²åŠä»¥ä¸Šä¸¤ä¸ªå¹´é¾„æ®µï¼Œåˆ†åˆ«æŸ¥çœ‹è¿™ä¸¤ä¸ªå¹´é¾„æ®µç”¨æˆ·æ•°é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;25å²åŠä»¥ä¸Š&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;25å²ä»¥ä¸‹&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age_info&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user_profile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">group&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age_info&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>ifnull(v1, v2)&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>v1 çš„å€¼ä¸ä¸º nullï¼Œè¿”å› v1ï¼Œå¦åˆ™è¿”å› v2ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ifnull&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">distinct&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">salary&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">salary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">desc&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SecondHighestSalary&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>case&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- å°†ç”¨æˆ·åˆ’åˆ†ä¸º25å²ä»¥ä¸‹å’Œ25å²åŠä»¥ä¸Šä¸¤ä¸ªå¹´é¾„æ®µï¼Œåˆ†åˆ«æŸ¥çœ‹è¿™ä¸¤ä¸ªå¹´é¾„æ®µç”¨æˆ·æ•°é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">case&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">when&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">then&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;25å²åŠä»¥ä¸Š&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;25å²ä»¥ä¸‹&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age_info&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">number&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user_profile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">group&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age_info&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- å°†ç”¨æˆ·åˆ’åˆ†ä¸º20å²ä»¥ä¸‹ï¼Œ20-24å²ï¼Œ25å²åŠä»¥ä¸Šä¸‰ä¸ªå¹´é¾„æ®µï¼Œåˆ†åˆ«æŸ¥çœ‹ä¸åŒå¹´é¾„æ®µç”¨æˆ·çš„æ˜ç»†æƒ…å†µ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">device_id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">gender&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">case&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">when&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">then&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;20å²ä»¥ä¸‹&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">when&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">then&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;20-24å²&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">when&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">then&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;25å²åŠä»¥ä¸Š&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;å…¶ä»–&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age_cut&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user_profile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">update&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Salary&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sex&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">case&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">set&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">when&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;m&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">then&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;f&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">then&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;f&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item></channel></rss>